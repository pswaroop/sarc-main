{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-provider.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/version.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-generative-ai-embedding-model.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-error.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-generative-ai-embedding-options.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-generative-ai-language-model.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/convert-google-generative-ai-usage.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/convert-json-schema-to-openapi-schema.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/convert-to-google-generative-ai-messages.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/get-model-path.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-generative-ai-options.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-prepare-tools.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/map-google-generative-ai-finish-reason.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/tool/code-execution.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/tool/enterprise-web-search.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/tool/file-search.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/tool/google-maps.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/tool/google-search.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/tool/url-context.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/tool/vertex-rag-store.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-tools.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-generative-ai-image-model.ts","turbopack:///[project]/Documents/Staffarc Projects/staffArcv0/staffarc/node_modules/.pnpm/@ai-sdk+google@3.0.31_zod@3.25.76/node_modules/@ai-sdk/google/src/google-generative-ai-video-model.ts"],"sourcesContent":["import {\n  EmbeddingModelV3,\n  Experimental_VideoModelV3,\n  ImageModelV3,\n  LanguageModelV3,\n  ProviderV3,\n} from '@ai-sdk/provider';\nimport {\n  FetchFunction,\n  generateId,\n  loadApiKey,\n  withoutTrailingSlash,\n  withUserAgentSuffix,\n} from '@ai-sdk/provider-utils';\nimport { VERSION } from './version';\nimport { GoogleGenerativeAIEmbeddingModel } from './google-generative-ai-embedding-model';\nimport { GoogleGenerativeAIEmbeddingModelId } from './google-generative-ai-embedding-options';\nimport { GoogleGenerativeAILanguageModel } from './google-generative-ai-language-model';\nimport { GoogleGenerativeAIModelId } from './google-generative-ai-options';\nimport { googleTools } from './google-tools';\n\nimport {\n  GoogleGenerativeAIImageSettings,\n  GoogleGenerativeAIImageModelId,\n} from './google-generative-ai-image-settings';\nimport { GoogleGenerativeAIImageModel } from './google-generative-ai-image-model';\nimport { GoogleGenerativeAIVideoModel } from './google-generative-ai-video-model';\nimport { GoogleGenerativeAIVideoModelId } from './google-generative-ai-video-settings';\n\nexport interface GoogleGenerativeAIProvider extends ProviderV3 {\n  (modelId: GoogleGenerativeAIModelId): LanguageModelV3;\n\n  languageModel(modelId: GoogleGenerativeAIModelId): LanguageModelV3;\n\n  chat(modelId: GoogleGenerativeAIModelId): LanguageModelV3;\n\n  /**\n   * Creates a model for image generation.\n   */\n  image(\n    modelId: GoogleGenerativeAIImageModelId,\n    settings?: GoogleGenerativeAIImageSettings,\n  ): ImageModelV3;\n\n  /**\n   * @deprecated Use `chat()` instead.\n   */\n  generativeAI(modelId: GoogleGenerativeAIModelId): LanguageModelV3;\n\n  /**\n   * Creates a model for text embeddings.\n   */\n  embedding(modelId: GoogleGenerativeAIEmbeddingModelId): EmbeddingModelV3;\n\n  /**\n   * Creates a model for text embeddings.\n   */\n  embeddingModel(modelId: GoogleGenerativeAIEmbeddingModelId): EmbeddingModelV3;\n\n  /**\n   * @deprecated Use `embedding` instead.\n   */\n  textEmbedding(modelId: GoogleGenerativeAIEmbeddingModelId): EmbeddingModelV3;\n\n  /**\n   * @deprecated Use `embeddingModel` instead.\n   */\n  textEmbeddingModel(\n    modelId: GoogleGenerativeAIEmbeddingModelId,\n  ): EmbeddingModelV3;\n\n  /**\n   * Creates a model for video generation.\n   */\n  video(modelId: GoogleGenerativeAIVideoModelId): Experimental_VideoModelV3;\n\n  /**\n   * Creates a model for video generation.\n   */\n  videoModel(\n    modelId: GoogleGenerativeAIVideoModelId,\n  ): Experimental_VideoModelV3;\n\n  tools: typeof googleTools;\n}\n\nexport interface GoogleGenerativeAIProviderSettings {\n  /**\n   * Use a different URL prefix for API calls, e.g. to use proxy servers.\n   * The default prefix is `https://generativelanguage.googleapis.com/v1beta`.\n   */\n  baseURL?: string;\n\n  /**\n   * API key that is being send using the `x-goog-api-key` header.\n   * It defaults to the `GOOGLE_GENERATIVE_AI_API_KEY` environment variable.\n   */\n  apiKey?: string;\n\n  /**\n   * Custom headers to include in the requests.\n   */\n  headers?: Record<string, string | undefined>;\n\n  /**\n   * Custom fetch implementation. You can use it as a middleware to intercept requests,\n   * or to provide a custom fetch implementation for e.g. testing.\n   */\n  fetch?: FetchFunction;\n\n  /**\n   * Optional function to generate a unique ID for each request.\n   */\n  generateId?: () => string;\n\n  /**\n   * Custom provider name\n   * Defaults to 'google.generative-ai'.\n   */\n  name?: string;\n}\n\n/**\n * Create a Google Generative AI provider instance.\n */\nexport function createGoogleGenerativeAI(\n  options: GoogleGenerativeAIProviderSettings = {},\n): GoogleGenerativeAIProvider {\n  const baseURL =\n    withoutTrailingSlash(options.baseURL) ??\n    'https://generativelanguage.googleapis.com/v1beta';\n\n  const providerName = options.name ?? 'google.generative-ai';\n\n  const getHeaders = () =>\n    withUserAgentSuffix(\n      {\n        'x-goog-api-key': loadApiKey({\n          apiKey: options.apiKey,\n          environmentVariableName: 'GOOGLE_GENERATIVE_AI_API_KEY',\n          description: 'Google Generative AI',\n        }),\n        ...options.headers,\n      },\n      `ai-sdk/google/${VERSION}`,\n    );\n\n  const createChatModel = (modelId: GoogleGenerativeAIModelId) =>\n    new GoogleGenerativeAILanguageModel(modelId, {\n      provider: providerName,\n      baseURL,\n      headers: getHeaders,\n      generateId: options.generateId ?? generateId,\n      supportedUrls: () => ({\n        '*': [\n          // Google Generative Language \"files\" endpoint\n          // e.g. https://generativelanguage.googleapis.com/v1beta/files/...\n          new RegExp(`^${baseURL}/files/.*$`),\n          // YouTube URLs (public or unlisted videos)\n          new RegExp(\n            `^https://(?:www\\\\.)?youtube\\\\.com/watch\\\\?v=[\\\\w-]+(?:&[\\\\w=&.-]*)?$`,\n          ),\n          new RegExp(`^https://youtu\\\\.be/[\\\\w-]+(?:\\\\?[\\\\w=&.-]*)?$`),\n        ],\n      }),\n      fetch: options.fetch,\n    });\n\n  const createEmbeddingModel = (modelId: GoogleGenerativeAIEmbeddingModelId) =>\n    new GoogleGenerativeAIEmbeddingModel(modelId, {\n      provider: providerName,\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch,\n    });\n\n  const createImageModel = (\n    modelId: GoogleGenerativeAIImageModelId,\n    settings: GoogleGenerativeAIImageSettings = {},\n  ) =>\n    new GoogleGenerativeAIImageModel(modelId, settings, {\n      provider: providerName,\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch,\n    });\n\n  const createVideoModel = (modelId: GoogleGenerativeAIVideoModelId) =>\n    new GoogleGenerativeAIVideoModel(modelId, {\n      provider: providerName,\n      baseURL,\n      headers: getHeaders,\n      fetch: options.fetch,\n      generateId: options.generateId ?? generateId,\n    });\n\n  const provider = function (modelId: GoogleGenerativeAIModelId) {\n    if (new.target) {\n      throw new Error(\n        'The Google Generative AI model function cannot be called with the new keyword.',\n      );\n    }\n\n    return createChatModel(modelId);\n  };\n\n  provider.specificationVersion = 'v3' as const;\n  provider.languageModel = createChatModel;\n  provider.chat = createChatModel;\n  provider.generativeAI = createChatModel;\n  provider.embedding = createEmbeddingModel;\n  provider.embeddingModel = createEmbeddingModel;\n  provider.textEmbedding = createEmbeddingModel;\n  provider.textEmbeddingModel = createEmbeddingModel;\n  provider.image = createImageModel;\n  provider.imageModel = createImageModel;\n  provider.video = createVideoModel;\n  provider.videoModel = createVideoModel;\n  provider.tools = googleTools;\n\n  return provider as GoogleGenerativeAIProvider;\n}\n\n/**\n * Default Google Generative AI provider instance.\n */\nexport const google = createGoogleGenerativeAI();\n","// Version string of this package injected at build time.\ndeclare const __PACKAGE_VERSION__: string | undefined;\nexport const VERSION: string =\n  typeof __PACKAGE_VERSION__ !== 'undefined'\n    ? __PACKAGE_VERSION__\n    : '0.0.0-test';\n","import {\n  EmbeddingModelV3,\n  TooManyEmbeddingValuesForCallError,\n} from '@ai-sdk/provider';\nimport {\n  combineHeaders,\n  createJsonResponseHandler,\n  FetchFunction,\n  lazySchema,\n  parseProviderOptions,\n  postJsonToApi,\n  resolve,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\nimport { googleFailedResponseHandler } from './google-error';\nimport {\n  GoogleGenerativeAIEmbeddingModelId,\n  googleEmbeddingModelOptions,\n} from './google-generative-ai-embedding-options';\n\ntype GoogleGenerativeAIEmbeddingConfig = {\n  provider: string;\n  baseURL: string;\n  headers: () => Record<string, string | undefined>;\n  fetch?: FetchFunction;\n};\n\nexport class GoogleGenerativeAIEmbeddingModel implements EmbeddingModelV3 {\n  readonly specificationVersion = 'v3';\n  readonly modelId: GoogleGenerativeAIEmbeddingModelId;\n  readonly maxEmbeddingsPerCall = 2048;\n  readonly supportsParallelCalls = true;\n\n  private readonly config: GoogleGenerativeAIEmbeddingConfig;\n\n  get provider(): string {\n    return this.config.provider;\n  }\n  constructor(\n    modelId: GoogleGenerativeAIEmbeddingModelId,\n    config: GoogleGenerativeAIEmbeddingConfig,\n  ) {\n    this.modelId = modelId;\n    this.config = config;\n  }\n\n  async doEmbed({\n    values,\n    headers,\n    abortSignal,\n    providerOptions,\n  }: Parameters<EmbeddingModelV3['doEmbed']>[0]): Promise<\n    Awaited<ReturnType<EmbeddingModelV3['doEmbed']>>\n  > {\n    // Parse provider options\n    const googleOptions = await parseProviderOptions({\n      provider: 'google',\n      providerOptions,\n      schema: googleEmbeddingModelOptions,\n    });\n\n    if (values.length > this.maxEmbeddingsPerCall) {\n      throw new TooManyEmbeddingValuesForCallError({\n        provider: this.provider,\n        modelId: this.modelId,\n        maxEmbeddingsPerCall: this.maxEmbeddingsPerCall,\n        values,\n      });\n    }\n\n    const mergedHeaders = combineHeaders(\n      await resolve(this.config.headers),\n      headers,\n    );\n\n    // For single embeddings, use the single endpoint (ratelimits, etc.)\n    if (values.length === 1) {\n      const {\n        responseHeaders,\n        value: response,\n        rawValue,\n      } = await postJsonToApi({\n        url: `${this.config.baseURL}/models/${this.modelId}:embedContent`,\n        headers: mergedHeaders,\n        body: {\n          model: `models/${this.modelId}`,\n          content: {\n            parts: [{ text: values[0] }],\n          },\n          outputDimensionality: googleOptions?.outputDimensionality,\n          taskType: googleOptions?.taskType,\n        },\n        failedResponseHandler: googleFailedResponseHandler,\n        successfulResponseHandler: createJsonResponseHandler(\n          googleGenerativeAISingleEmbeddingResponseSchema,\n        ),\n        abortSignal,\n        fetch: this.config.fetch,\n      });\n\n      return {\n        warnings: [],\n        embeddings: [response.embedding.values],\n        usage: undefined,\n        response: { headers: responseHeaders, body: rawValue },\n      };\n    }\n\n    const {\n      responseHeaders,\n      value: response,\n      rawValue,\n    } = await postJsonToApi({\n      url: `${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,\n      headers: mergedHeaders,\n      body: {\n        requests: values.map(value => ({\n          model: `models/${this.modelId}`,\n          content: { role: 'user', parts: [{ text: value }] },\n          outputDimensionality: googleOptions?.outputDimensionality,\n          taskType: googleOptions?.taskType,\n        })),\n      },\n      failedResponseHandler: googleFailedResponseHandler,\n      successfulResponseHandler: createJsonResponseHandler(\n        googleGenerativeAITextEmbeddingResponseSchema,\n      ),\n      abortSignal,\n      fetch: this.config.fetch,\n    });\n\n    return {\n      warnings: [],\n      embeddings: response.embeddings.map(item => item.values),\n      usage: undefined,\n      response: { headers: responseHeaders, body: rawValue },\n    };\n  }\n}\n\n// minimal version of the schema, focussed on what is needed for the implementation\n// this approach limits breakages when the API changes and increases efficiency\nconst googleGenerativeAITextEmbeddingResponseSchema = lazySchema(() =>\n  zodSchema(\n    z.object({\n      embeddings: z.array(z.object({ values: z.array(z.number()) })),\n    }),\n  ),\n);\n\n// Schema for single embedding response\nconst googleGenerativeAISingleEmbeddingResponseSchema = lazySchema(() =>\n  zodSchema(\n    z.object({\n      embedding: z.object({ values: z.array(z.number()) }),\n    }),\n  ),\n);\n","import {\n  createJsonErrorResponseHandler,\n  type InferSchema,\n  lazySchema,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\nconst googleErrorDataSchema = lazySchema(() =>\n  zodSchema(\n    z.object({\n      error: z.object({\n        code: z.number().nullable(),\n        message: z.string(),\n        status: z.string(),\n      }),\n    }),\n  ),\n);\n\nexport type GoogleErrorData = InferSchema<typeof googleErrorDataSchema>;\n\nexport const googleFailedResponseHandler = createJsonErrorResponseHandler({\n  errorSchema: googleErrorDataSchema,\n  errorToMessage: data => data.error.message,\n});\n","import {\n  type InferSchema,\n  lazySchema,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\nexport type GoogleGenerativeAIEmbeddingModelId =\n  | 'gemini-embedding-001'\n  | 'text-embedding-004'\n  | (string & {});\n\nexport const googleEmbeddingModelOptions = lazySchema(() =>\n  zodSchema(\n    z.object({\n      /**\n       * Optional. Optional reduced dimension for the output embedding.\n       * If set, excessive values in the output embedding are truncated from the end.\n       */\n      outputDimensionality: z.number().optional(),\n\n      /**\n       * Optional. Specifies the task type for generating embeddings.\n       * Supported task types:\n       * - SEMANTIC_SIMILARITY: Optimized for text similarity.\n       * - CLASSIFICATION: Optimized for text classification.\n       * - CLUSTERING: Optimized for clustering texts based on similarity.\n       * - RETRIEVAL_DOCUMENT: Optimized for document retrieval.\n       * - RETRIEVAL_QUERY: Optimized for query-based retrieval.\n       * - QUESTION_ANSWERING: Optimized for answering questions.\n       * - FACT_VERIFICATION: Optimized for verifying factual information.\n       * - CODE_RETRIEVAL_QUERY: Optimized for retrieving code blocks based on natural language queries.\n       */\n      taskType: z\n        .enum([\n          'SEMANTIC_SIMILARITY',\n          'CLASSIFICATION',\n          'CLUSTERING',\n          'RETRIEVAL_DOCUMENT',\n          'RETRIEVAL_QUERY',\n          'QUESTION_ANSWERING',\n          'FACT_VERIFICATION',\n          'CODE_RETRIEVAL_QUERY',\n        ])\n        .optional(),\n    }),\n  ),\n);\n\nexport type GoogleEmbeddingModelOptions = InferSchema<\n  typeof googleEmbeddingModelOptions\n>;\n","import {\n  LanguageModelV3,\n  LanguageModelV3CallOptions,\n  LanguageModelV3Content,\n  LanguageModelV3FinishReason,\n  LanguageModelV3GenerateResult,\n  LanguageModelV3Source,\n  LanguageModelV3StreamPart,\n  LanguageModelV3StreamResult,\n  SharedV3ProviderMetadata,\n  SharedV3Warning,\n} from '@ai-sdk/provider';\nimport {\n  combineHeaders,\n  createEventSourceResponseHandler,\n  createJsonResponseHandler,\n  FetchFunction,\n  generateId,\n  InferSchema,\n  lazySchema,\n  parseProviderOptions,\n  ParseResult,\n  postJsonToApi,\n  Resolvable,\n  resolve,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\nimport {\n  convertGoogleGenerativeAIUsage,\n  GoogleGenerativeAIUsageMetadata,\n} from './convert-google-generative-ai-usage';\nimport { convertJSONSchemaToOpenAPISchema } from './convert-json-schema-to-openapi-schema';\nimport { convertToGoogleGenerativeAIMessages } from './convert-to-google-generative-ai-messages';\nimport { getModelPath } from './get-model-path';\nimport { googleFailedResponseHandler } from './google-error';\nimport {\n  GoogleGenerativeAIModelId,\n  googleLanguageModelOptions,\n} from './google-generative-ai-options';\nimport { GoogleGenerativeAIContentPart } from './google-generative-ai-prompt';\nimport { prepareTools } from './google-prepare-tools';\nimport { mapGoogleGenerativeAIFinishReason } from './map-google-generative-ai-finish-reason';\n\ntype GoogleGenerativeAIConfig = {\n  provider: string;\n  baseURL: string;\n  headers: Resolvable<Record<string, string | undefined>>;\n  fetch?: FetchFunction;\n  generateId: () => string;\n\n  /**\n   * The supported URLs for the model.\n   */\n  supportedUrls?: () => LanguageModelV3['supportedUrls'];\n};\n\nexport class GoogleGenerativeAILanguageModel implements LanguageModelV3 {\n  readonly specificationVersion = 'v3';\n\n  readonly modelId: GoogleGenerativeAIModelId;\n\n  private readonly config: GoogleGenerativeAIConfig;\n  private readonly generateId: () => string;\n\n  constructor(\n    modelId: GoogleGenerativeAIModelId,\n    config: GoogleGenerativeAIConfig,\n  ) {\n    this.modelId = modelId;\n    this.config = config;\n    this.generateId = config.generateId ?? generateId;\n  }\n\n  get provider(): string {\n    return this.config.provider;\n  }\n\n  get supportedUrls() {\n    return this.config.supportedUrls?.() ?? {};\n  }\n\n  private async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences,\n    responseFormat,\n    seed,\n    tools,\n    toolChoice,\n    providerOptions,\n  }: LanguageModelV3CallOptions) {\n    const warnings: SharedV3Warning[] = [];\n\n    const providerOptionsName = this.config.provider.includes('vertex')\n      ? 'vertex'\n      : 'google';\n    let googleOptions = await parseProviderOptions({\n      provider: providerOptionsName,\n      providerOptions,\n      schema: googleLanguageModelOptions,\n    });\n\n    if (googleOptions == null && providerOptionsName !== 'google') {\n      googleOptions = await parseProviderOptions({\n        provider: 'google',\n        providerOptions,\n        schema: googleLanguageModelOptions,\n      });\n    }\n\n    // Add warning if Vertex rag tools are used with a non-Vertex Google provider\n    if (\n      tools?.some(\n        tool =>\n          tool.type === 'provider' && tool.id === 'google.vertex_rag_store',\n      ) &&\n      !this.config.provider.startsWith('google.vertex.')\n    ) {\n      warnings.push({\n        type: 'other',\n        message:\n          \"The 'vertex_rag_store' tool is only supported with the Google Vertex provider \" +\n          'and might not be supported or could behave unexpectedly with the current Google provider ' +\n          `(${this.config.provider}).`,\n      });\n    }\n\n    const isGemmaModel = this.modelId.toLowerCase().startsWith('gemma-');\n\n    const { contents, systemInstruction } = convertToGoogleGenerativeAIMessages(\n      prompt,\n      { isGemmaModel, providerOptionsName },\n    );\n\n    const {\n      tools: googleTools,\n      toolConfig: googleToolConfig,\n      toolWarnings,\n    } = prepareTools({\n      tools,\n      toolChoice,\n      modelId: this.modelId,\n    });\n\n    return {\n      args: {\n        generationConfig: {\n          // standardized settings:\n          maxOutputTokens,\n          temperature,\n          topK,\n          topP,\n          frequencyPenalty,\n          presencePenalty,\n          stopSequences,\n          seed,\n\n          // response format:\n          responseMimeType:\n            responseFormat?.type === 'json' ? 'application/json' : undefined,\n          responseSchema:\n            responseFormat?.type === 'json' &&\n            responseFormat.schema != null &&\n            // Google GenAI does not support all OpenAPI Schema features,\n            // so this is needed as an escape hatch:\n            // TODO convert into provider option\n            (googleOptions?.structuredOutputs ?? true)\n              ? convertJSONSchemaToOpenAPISchema(responseFormat.schema)\n              : undefined,\n          ...(googleOptions?.audioTimestamp && {\n            audioTimestamp: googleOptions.audioTimestamp,\n          }),\n\n          // provider options:\n          responseModalities: googleOptions?.responseModalities,\n          thinkingConfig: googleOptions?.thinkingConfig,\n          ...(googleOptions?.mediaResolution && {\n            mediaResolution: googleOptions.mediaResolution,\n          }),\n          ...(googleOptions?.imageConfig && {\n            imageConfig: googleOptions.imageConfig,\n          }),\n        },\n        contents,\n        systemInstruction: isGemmaModel ? undefined : systemInstruction,\n        safetySettings: googleOptions?.safetySettings,\n        tools: googleTools,\n        toolConfig: googleOptions?.retrievalConfig\n          ? {\n              ...googleToolConfig,\n              retrievalConfig: googleOptions.retrievalConfig,\n            }\n          : googleToolConfig,\n        cachedContent: googleOptions?.cachedContent,\n        labels: googleOptions?.labels,\n      },\n      warnings: [...warnings, ...toolWarnings],\n      providerOptionsName,\n    };\n  }\n\n  async doGenerate(\n    options: LanguageModelV3CallOptions,\n  ): Promise<LanguageModelV3GenerateResult> {\n    const { args, warnings, providerOptionsName } = await this.getArgs(options);\n\n    const mergedHeaders = combineHeaders(\n      await resolve(this.config.headers),\n      options.headers,\n    );\n\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse,\n    } = await postJsonToApi({\n      url: `${this.config.baseURL}/${getModelPath(\n        this.modelId,\n      )}:generateContent`,\n      headers: mergedHeaders,\n      body: args,\n      failedResponseHandler: googleFailedResponseHandler,\n      successfulResponseHandler: createJsonResponseHandler(responseSchema),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch,\n    });\n\n    const candidate = response.candidates[0];\n    const content: Array<LanguageModelV3Content> = [];\n\n    // map ordered parts to content:\n    const parts = candidate.content?.parts ?? [];\n\n    const usageMetadata = response.usageMetadata;\n\n    // Associates a code execution result with its preceding call.\n    let lastCodeExecutionToolCallId: string | undefined;\n\n    // Build content array from all parts\n    for (const part of parts) {\n      if ('executableCode' in part && part.executableCode?.code) {\n        const toolCallId = this.config.generateId();\n        lastCodeExecutionToolCallId = toolCallId;\n\n        content.push({\n          type: 'tool-call',\n          toolCallId,\n          toolName: 'code_execution',\n          input: JSON.stringify(part.executableCode),\n          providerExecuted: true,\n        });\n      } else if ('codeExecutionResult' in part && part.codeExecutionResult) {\n        content.push({\n          type: 'tool-result',\n          // Assumes a result directly follows its corresponding call part.\n          toolCallId: lastCodeExecutionToolCallId!,\n          toolName: 'code_execution',\n          result: {\n            outcome: part.codeExecutionResult.outcome,\n            output: part.codeExecutionResult.output ?? '',\n          },\n        });\n        // Clear the ID after use to avoid accidental reuse.\n        lastCodeExecutionToolCallId = undefined;\n      } else if ('text' in part && part.text != null) {\n        const thoughtSignatureMetadata = part.thoughtSignature\n          ? {\n              [providerOptionsName]: {\n                thoughtSignature: part.thoughtSignature,\n              },\n            }\n          : undefined;\n\n        if (part.text.length === 0) {\n          if (thoughtSignatureMetadata != null && content.length > 0) {\n            const lastContent = content[content.length - 1];\n            lastContent.providerMetadata = thoughtSignatureMetadata;\n          }\n        } else {\n          content.push({\n            type: part.thought === true ? 'reasoning' : 'text',\n            text: part.text,\n            providerMetadata: thoughtSignatureMetadata,\n          });\n        }\n      } else if ('functionCall' in part) {\n        content.push({\n          type: 'tool-call' as const,\n          toolCallId: this.config.generateId(),\n          toolName: part.functionCall.name,\n          input: JSON.stringify(part.functionCall.args),\n          providerMetadata: part.thoughtSignature\n            ? {\n                [providerOptionsName]: {\n                  thoughtSignature: part.thoughtSignature,\n                },\n              }\n            : undefined,\n        });\n      } else if ('inlineData' in part) {\n        content.push({\n          type: 'file' as const,\n          data: part.inlineData.data,\n          mediaType: part.inlineData.mimeType,\n          providerMetadata: part.thoughtSignature\n            ? {\n                [providerOptionsName]: {\n                  thoughtSignature: part.thoughtSignature,\n                },\n              }\n            : undefined,\n        });\n      }\n    }\n\n    const sources =\n      extractSources({\n        groundingMetadata: candidate.groundingMetadata,\n        generateId: this.config.generateId,\n      }) ?? [];\n    for (const source of sources) {\n      content.push(source);\n    }\n\n    return {\n      content,\n      finishReason: {\n        unified: mapGoogleGenerativeAIFinishReason({\n          finishReason: candidate.finishReason,\n          // Only count client-executed tool calls for finish reason determination.\n          hasToolCalls: content.some(\n            part => part.type === 'tool-call' && !part.providerExecuted,\n          ),\n        }),\n        raw: candidate.finishReason ?? undefined,\n      },\n      usage: convertGoogleGenerativeAIUsage(usageMetadata),\n      warnings,\n      providerMetadata: {\n        [providerOptionsName]: {\n          promptFeedback: response.promptFeedback ?? null,\n          groundingMetadata: candidate.groundingMetadata ?? null,\n          urlContextMetadata: candidate.urlContextMetadata ?? null,\n          safetyRatings: candidate.safetyRatings ?? null,\n          usageMetadata: usageMetadata ?? null,\n        },\n      },\n      request: { body: args },\n      response: {\n        // TODO timestamp, model id, id\n        headers: responseHeaders,\n        body: rawResponse,\n      },\n    };\n  }\n\n  async doStream(\n    options: LanguageModelV3CallOptions,\n  ): Promise<LanguageModelV3StreamResult> {\n    const { args, warnings, providerOptionsName } = await this.getArgs(options);\n\n    const headers = combineHeaders(\n      await resolve(this.config.headers),\n      options.headers,\n    );\n\n    const { responseHeaders, value: response } = await postJsonToApi({\n      url: `${this.config.baseURL}/${getModelPath(\n        this.modelId,\n      )}:streamGenerateContent?alt=sse`,\n      headers,\n      body: args,\n      failedResponseHandler: googleFailedResponseHandler,\n      successfulResponseHandler: createEventSourceResponseHandler(chunkSchema),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch,\n    });\n\n    let finishReason: LanguageModelV3FinishReason = {\n      unified: 'other',\n      raw: undefined,\n    };\n    let usage: GoogleGenerativeAIUsageMetadata | undefined = undefined;\n    let providerMetadata: SharedV3ProviderMetadata | undefined = undefined;\n\n    const generateId = this.config.generateId;\n    let hasToolCalls = false;\n\n    // Track active blocks to group consecutive parts of same type\n    let currentTextBlockId: string | null = null;\n    let currentReasoningBlockId: string | null = null;\n    let blockCounter = 0;\n\n    // Track emitted sources to prevent duplicates\n    const emittedSourceUrls = new Set<string>();\n    // Associates a code execution result with its preceding call.\n    let lastCodeExecutionToolCallId: string | undefined;\n\n    return {\n      stream: response.pipeThrough(\n        new TransformStream<\n          ParseResult<ChunkSchema>,\n          LanguageModelV3StreamPart\n        >({\n          start(controller) {\n            controller.enqueue({ type: 'stream-start', warnings });\n          },\n\n          transform(chunk, controller) {\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: 'raw', rawValue: chunk.rawValue });\n            }\n\n            if (!chunk.success) {\n              controller.enqueue({ type: 'error', error: chunk.error });\n              return;\n            }\n\n            const value = chunk.value;\n\n            const usageMetadata = value.usageMetadata;\n\n            if (usageMetadata != null) {\n              usage = usageMetadata;\n            }\n\n            const candidate = value.candidates?.[0];\n\n            // sometimes the API returns an empty candidates array\n            if (candidate == null) {\n              return;\n            }\n\n            const content = candidate.content;\n\n            const sources = extractSources({\n              groundingMetadata: candidate.groundingMetadata,\n              generateId,\n            });\n            if (sources != null) {\n              for (const source of sources) {\n                if (\n                  source.sourceType === 'url' &&\n                  !emittedSourceUrls.has(source.url)\n                ) {\n                  emittedSourceUrls.add(source.url);\n                  controller.enqueue(source);\n                }\n              }\n            }\n\n            // Process tool call's parts before determining finishReason to ensure hasToolCalls is properly set\n            if (content != null) {\n              // Process all parts in a single loop to preserve original order\n              const parts = content.parts ?? [];\n              for (const part of parts) {\n                if ('executableCode' in part && part.executableCode?.code) {\n                  const toolCallId = generateId();\n                  lastCodeExecutionToolCallId = toolCallId;\n\n                  controller.enqueue({\n                    type: 'tool-call',\n                    toolCallId,\n                    toolName: 'code_execution',\n                    input: JSON.stringify(part.executableCode),\n                    providerExecuted: true,\n                  });\n                } else if (\n                  'codeExecutionResult' in part &&\n                  part.codeExecutionResult\n                ) {\n                  // Assumes a result directly follows its corresponding call part.\n                  const toolCallId = lastCodeExecutionToolCallId;\n\n                  if (toolCallId) {\n                    controller.enqueue({\n                      type: 'tool-result',\n                      toolCallId,\n                      toolName: 'code_execution',\n                      result: {\n                        outcome: part.codeExecutionResult.outcome,\n                        output: part.codeExecutionResult.output ?? '',\n                      },\n                    });\n                    // Clear the ID after use.\n                    lastCodeExecutionToolCallId = undefined;\n                  }\n                } else if ('text' in part && part.text != null) {\n                  const thoughtSignatureMetadata = part.thoughtSignature\n                    ? {\n                        [providerOptionsName]: {\n                          thoughtSignature: part.thoughtSignature,\n                        },\n                      }\n                    : undefined;\n\n                  if (part.text.length === 0) {\n                    if (\n                      thoughtSignatureMetadata != null &&\n                      currentTextBlockId !== null\n                    ) {\n                      controller.enqueue({\n                        type: 'text-delta',\n                        id: currentTextBlockId,\n                        delta: '',\n                        providerMetadata: thoughtSignatureMetadata,\n                      });\n                    }\n                  } else if (part.thought === true) {\n                    // End any active text block before starting reasoning\n                    if (currentTextBlockId !== null) {\n                      controller.enqueue({\n                        type: 'text-end',\n                        id: currentTextBlockId,\n                      });\n                      currentTextBlockId = null;\n                    }\n\n                    // Start new reasoning block if not already active\n                    if (currentReasoningBlockId === null) {\n                      currentReasoningBlockId = String(blockCounter++);\n                      controller.enqueue({\n                        type: 'reasoning-start',\n                        id: currentReasoningBlockId,\n                        providerMetadata: thoughtSignatureMetadata,\n                      });\n                    }\n\n                    controller.enqueue({\n                      type: 'reasoning-delta',\n                      id: currentReasoningBlockId,\n                      delta: part.text,\n                      providerMetadata: thoughtSignatureMetadata,\n                    });\n                  } else {\n                    if (currentReasoningBlockId !== null) {\n                      controller.enqueue({\n                        type: 'reasoning-end',\n                        id: currentReasoningBlockId,\n                      });\n                      currentReasoningBlockId = null;\n                    }\n\n                    if (currentTextBlockId === null) {\n                      currentTextBlockId = String(blockCounter++);\n                      controller.enqueue({\n                        type: 'text-start',\n                        id: currentTextBlockId,\n                        providerMetadata: thoughtSignatureMetadata,\n                      });\n                    }\n\n                    controller.enqueue({\n                      type: 'text-delta',\n                      id: currentTextBlockId,\n                      delta: part.text,\n                      providerMetadata: thoughtSignatureMetadata,\n                    });\n                  }\n                } else if ('inlineData' in part) {\n                  // Process file parts inline to preserve order with text\n                  controller.enqueue({\n                    type: 'file',\n                    mediaType: part.inlineData.mimeType,\n                    data: part.inlineData.data,\n                  });\n                }\n              }\n\n              const toolCallDeltas = getToolCallsFromParts({\n                parts: content.parts,\n                generateId,\n                providerOptionsName,\n              });\n\n              if (toolCallDeltas != null) {\n                for (const toolCall of toolCallDeltas) {\n                  controller.enqueue({\n                    type: 'tool-input-start',\n                    id: toolCall.toolCallId,\n                    toolName: toolCall.toolName,\n                    providerMetadata: toolCall.providerMetadata,\n                  });\n\n                  controller.enqueue({\n                    type: 'tool-input-delta',\n                    id: toolCall.toolCallId,\n                    delta: toolCall.args,\n                    providerMetadata: toolCall.providerMetadata,\n                  });\n\n                  controller.enqueue({\n                    type: 'tool-input-end',\n                    id: toolCall.toolCallId,\n                    providerMetadata: toolCall.providerMetadata,\n                  });\n\n                  controller.enqueue({\n                    type: 'tool-call',\n                    toolCallId: toolCall.toolCallId,\n                    toolName: toolCall.toolName,\n                    input: toolCall.args,\n                    providerMetadata: toolCall.providerMetadata,\n                  });\n\n                  hasToolCalls = true;\n                }\n              }\n            }\n\n            if (candidate.finishReason != null) {\n              finishReason = {\n                unified: mapGoogleGenerativeAIFinishReason({\n                  finishReason: candidate.finishReason,\n                  hasToolCalls,\n                }),\n                raw: candidate.finishReason,\n              };\n\n              providerMetadata = {\n                [providerOptionsName]: {\n                  promptFeedback: value.promptFeedback ?? null,\n                  groundingMetadata: candidate.groundingMetadata ?? null,\n                  urlContextMetadata: candidate.urlContextMetadata ?? null,\n                  safetyRatings: candidate.safetyRatings ?? null,\n                },\n              };\n              if (usageMetadata != null) {\n                (\n                  providerMetadata[providerOptionsName] as Record<\n                    string,\n                    unknown\n                  >\n                ).usageMetadata = usageMetadata;\n              }\n            }\n          },\n\n          flush(controller) {\n            if (currentTextBlockId !== null) {\n              controller.enqueue({\n                type: 'text-end',\n                id: currentTextBlockId,\n              });\n            }\n            if (currentReasoningBlockId !== null) {\n              controller.enqueue({\n                type: 'reasoning-end',\n                id: currentReasoningBlockId,\n              });\n            }\n\n            controller.enqueue({\n              type: 'finish',\n              finishReason,\n              usage: convertGoogleGenerativeAIUsage(usage),\n              providerMetadata,\n            });\n          },\n        }),\n      ),\n      response: { headers: responseHeaders },\n      request: { body: args },\n    };\n  }\n}\n\nfunction getToolCallsFromParts({\n  parts,\n  generateId,\n  providerOptionsName,\n}: {\n  parts: ContentSchema['parts'];\n  generateId: () => string;\n  providerOptionsName: string;\n}) {\n  const functionCallParts = parts?.filter(\n    part => 'functionCall' in part,\n  ) as Array<\n    GoogleGenerativeAIContentPart & {\n      functionCall: { name: string; args: unknown };\n      thoughtSignature?: string | null;\n    }\n  >;\n\n  return functionCallParts == null || functionCallParts.length === 0\n    ? undefined\n    : functionCallParts.map(part => ({\n        type: 'tool-call' as const,\n        toolCallId: generateId(),\n        toolName: part.functionCall.name,\n        args: JSON.stringify(part.functionCall.args),\n        providerMetadata: part.thoughtSignature\n          ? {\n              [providerOptionsName]: {\n                thoughtSignature: part.thoughtSignature,\n              },\n            }\n          : undefined,\n      }));\n}\n\nfunction extractSources({\n  groundingMetadata,\n  generateId,\n}: {\n  groundingMetadata: GroundingMetadataSchema | undefined | null;\n  generateId: () => string;\n}): undefined | LanguageModelV3Source[] {\n  if (!groundingMetadata?.groundingChunks) {\n    return undefined;\n  }\n\n  const sources: LanguageModelV3Source[] = [];\n\n  for (const chunk of groundingMetadata.groundingChunks) {\n    if (chunk.web != null) {\n      // Handle web chunks as URL sources\n      sources.push({\n        type: 'source',\n        sourceType: 'url',\n        id: generateId(),\n        url: chunk.web.uri,\n        title: chunk.web.title ?? undefined,\n      });\n    } else if (chunk.retrievedContext != null) {\n      // Handle retrievedContext chunks from RAG operations\n      const uri = chunk.retrievedContext.uri;\n      const fileSearchStore = chunk.retrievedContext.fileSearchStore;\n\n      if (uri && (uri.startsWith('http://') || uri.startsWith('https://'))) {\n        // Old format: Google Search with HTTP/HTTPS URL\n        sources.push({\n          type: 'source',\n          sourceType: 'url',\n          id: generateId(),\n          url: uri,\n          title: chunk.retrievedContext.title ?? undefined,\n        });\n      } else if (uri) {\n        // Old format: Document with file path (gs://, etc.)\n        const title = chunk.retrievedContext.title ?? 'Unknown Document';\n        let mediaType = 'application/octet-stream';\n        let filename: string | undefined = undefined;\n\n        if (uri.endsWith('.pdf')) {\n          mediaType = 'application/pdf';\n          filename = uri.split('/').pop();\n        } else if (uri.endsWith('.txt')) {\n          mediaType = 'text/plain';\n          filename = uri.split('/').pop();\n        } else if (uri.endsWith('.docx')) {\n          mediaType =\n            'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\n          filename = uri.split('/').pop();\n        } else if (uri.endsWith('.doc')) {\n          mediaType = 'application/msword';\n          filename = uri.split('/').pop();\n        } else if (uri.match(/\\.(md|markdown)$/)) {\n          mediaType = 'text/markdown';\n          filename = uri.split('/').pop();\n        } else {\n          filename = uri.split('/').pop();\n        }\n\n        sources.push({\n          type: 'source',\n          sourceType: 'document',\n          id: generateId(),\n          mediaType,\n          title,\n          filename,\n        });\n      } else if (fileSearchStore) {\n        // New format: File Search with fileSearchStore (no uri)\n        const title = chunk.retrievedContext.title ?? 'Unknown Document';\n        sources.push({\n          type: 'source',\n          sourceType: 'document',\n          id: generateId(),\n          mediaType: 'application/octet-stream',\n          title,\n          filename: fileSearchStore.split('/').pop(),\n        });\n      }\n    } else if (chunk.maps != null) {\n      if (chunk.maps.uri) {\n        sources.push({\n          type: 'source',\n          sourceType: 'url',\n          id: generateId(),\n          url: chunk.maps.uri,\n          title: chunk.maps.title ?? undefined,\n        });\n      }\n    }\n  }\n\n  return sources.length > 0 ? sources : undefined;\n}\n\nexport const getGroundingMetadataSchema = () =>\n  z.object({\n    webSearchQueries: z.array(z.string()).nullish(),\n    retrievalQueries: z.array(z.string()).nullish(),\n    searchEntryPoint: z.object({ renderedContent: z.string() }).nullish(),\n    groundingChunks: z\n      .array(\n        z.object({\n          web: z\n            .object({ uri: z.string(), title: z.string().nullish() })\n            .nullish(),\n          retrievedContext: z\n            .object({\n              uri: z.string().nullish(),\n              title: z.string().nullish(),\n              text: z.string().nullish(),\n              fileSearchStore: z.string().nullish(),\n            })\n            .nullish(),\n          maps: z\n            .object({\n              uri: z.string().nullish(),\n              title: z.string().nullish(),\n              text: z.string().nullish(),\n              placeId: z.string().nullish(),\n            })\n            .nullish(),\n        }),\n      )\n      .nullish(),\n    groundingSupports: z\n      .array(\n        z.object({\n          segment: z\n            .object({\n              startIndex: z.number().nullish(),\n              endIndex: z.number().nullish(),\n              text: z.string().nullish(),\n            })\n            .nullish(),\n          segment_text: z.string().nullish(),\n          groundingChunkIndices: z.array(z.number()).nullish(),\n          supportChunkIndices: z.array(z.number()).nullish(),\n          confidenceScores: z.array(z.number()).nullish(),\n          confidenceScore: z.array(z.number()).nullish(),\n        }),\n      )\n      .nullish(),\n    retrievalMetadata: z\n      .union([\n        z.object({\n          webDynamicRetrievalScore: z.number(),\n        }),\n        z.object({}),\n      ])\n      .nullish(),\n  });\n\nconst getContentSchema = () =>\n  z.object({\n    parts: z\n      .array(\n        z.union([\n          // note: order matters since text can be fully empty\n          z.object({\n            functionCall: z.object({\n              name: z.string(),\n              args: z.unknown(),\n            }),\n            thoughtSignature: z.string().nullish(),\n          }),\n          z.object({\n            inlineData: z.object({\n              mimeType: z.string(),\n              data: z.string(),\n            }),\n            thoughtSignature: z.string().nullish(),\n          }),\n          z.object({\n            executableCode: z\n              .object({\n                language: z.string(),\n                code: z.string(),\n              })\n              .nullish(),\n            codeExecutionResult: z\n              .object({\n                outcome: z.string(),\n                output: z.string().nullish(),\n              })\n              .nullish(),\n            text: z.string().nullish(),\n            thought: z.boolean().nullish(),\n            thoughtSignature: z.string().nullish(),\n          }),\n        ]),\n      )\n      .nullish(),\n  });\n\n// https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/configure-safety-filters\nconst getSafetyRatingSchema = () =>\n  z.object({\n    category: z.string().nullish(),\n    probability: z.string().nullish(),\n    probabilityScore: z.number().nullish(),\n    severity: z.string().nullish(),\n    severityScore: z.number().nullish(),\n    blocked: z.boolean().nullish(),\n  });\n\nconst usageSchema = z.object({\n  cachedContentTokenCount: z.number().nullish(),\n  thoughtsTokenCount: z.number().nullish(),\n  promptTokenCount: z.number().nullish(),\n  candidatesTokenCount: z.number().nullish(),\n  totalTokenCount: z.number().nullish(),\n  // https://cloud.google.com/vertex-ai/generative-ai/docs/reference/rest/v1/GenerateContentResponse#TrafficType\n  trafficType: z.string().nullish(),\n});\n\n// https://ai.google.dev/api/generate-content#UrlRetrievalMetadata\nexport const getUrlContextMetadataSchema = () =>\n  z.object({\n    urlMetadata: z.array(\n      z.object({\n        retrievedUrl: z.string(),\n        urlRetrievalStatus: z.string(),\n      }),\n    ),\n  });\n\nconst responseSchema = lazySchema(() =>\n  zodSchema(\n    z.object({\n      candidates: z.array(\n        z.object({\n          content: getContentSchema().nullish().or(z.object({}).strict()),\n          finishReason: z.string().nullish(),\n          safetyRatings: z.array(getSafetyRatingSchema()).nullish(),\n          groundingMetadata: getGroundingMetadataSchema().nullish(),\n          urlContextMetadata: getUrlContextMetadataSchema().nullish(),\n        }),\n      ),\n      usageMetadata: usageSchema.nullish(),\n      promptFeedback: z\n        .object({\n          blockReason: z.string().nullish(),\n          safetyRatings: z.array(getSafetyRatingSchema()).nullish(),\n        })\n        .nullish(),\n    }),\n  ),\n);\n\ntype ContentSchema = NonNullable<\n  InferSchema<typeof responseSchema>['candidates'][number]['content']\n>;\nexport type GroundingMetadataSchema = NonNullable<\n  InferSchema<typeof responseSchema>['candidates'][number]['groundingMetadata']\n>;\n\ntype GroundingChunkSchema = NonNullable<\n  GroundingMetadataSchema['groundingChunks']\n>[number];\n\nexport type UrlContextMetadataSchema = NonNullable<\n  InferSchema<typeof responseSchema>['candidates'][number]['urlContextMetadata']\n>;\n\nexport type SafetyRatingSchema = NonNullable<\n  InferSchema<typeof responseSchema>['candidates'][number]['safetyRatings']\n>[number];\n\n// limited version of the schema, focussed on what is needed for the implementation\n// this approach limits breakages when the API changes and increases efficiency\nconst chunkSchema = lazySchema(() =>\n  zodSchema(\n    z.object({\n      candidates: z\n        .array(\n          z.object({\n            content: getContentSchema().nullish(),\n            finishReason: z.string().nullish(),\n            safetyRatings: z.array(getSafetyRatingSchema()).nullish(),\n            groundingMetadata: getGroundingMetadataSchema().nullish(),\n            urlContextMetadata: getUrlContextMetadataSchema().nullish(),\n          }),\n        )\n        .nullish(),\n      usageMetadata: usageSchema.nullish(),\n      promptFeedback: z\n        .object({\n          blockReason: z.string().nullish(),\n          safetyRatings: z.array(getSafetyRatingSchema()).nullish(),\n        })\n        .nullish(),\n    }),\n  ),\n);\n\ntype ChunkSchema = InferSchema<typeof chunkSchema>;\n","import { LanguageModelV3Usage } from '@ai-sdk/provider';\n\nexport type GoogleGenerativeAIUsageMetadata = {\n  promptTokenCount?: number | null;\n  candidatesTokenCount?: number | null;\n  totalTokenCount?: number | null;\n  cachedContentTokenCount?: number | null;\n  thoughtsTokenCount?: number | null;\n  trafficType?: string | null;\n};\n\nexport function convertGoogleGenerativeAIUsage(\n  usage: GoogleGenerativeAIUsageMetadata | undefined | null,\n): LanguageModelV3Usage {\n  if (usage == null) {\n    return {\n      inputTokens: {\n        total: undefined,\n        noCache: undefined,\n        cacheRead: undefined,\n        cacheWrite: undefined,\n      },\n      outputTokens: {\n        total: undefined,\n        text: undefined,\n        reasoning: undefined,\n      },\n      raw: undefined,\n    };\n  }\n\n  const promptTokens = usage.promptTokenCount ?? 0;\n  const candidatesTokens = usage.candidatesTokenCount ?? 0;\n  const cachedContentTokens = usage.cachedContentTokenCount ?? 0;\n  const thoughtsTokens = usage.thoughtsTokenCount ?? 0;\n\n  return {\n    inputTokens: {\n      total: promptTokens,\n      noCache: promptTokens - cachedContentTokens,\n      cacheRead: cachedContentTokens,\n      cacheWrite: undefined,\n    },\n    outputTokens: {\n      total: candidatesTokens + thoughtsTokens,\n      text: candidatesTokens,\n      reasoning: thoughtsTokens,\n    },\n    raw: usage,\n  };\n}\n","import { JSONSchema7Definition } from '@ai-sdk/provider';\n\n/**\n * Converts JSON Schema 7 to OpenAPI Schema 3.0\n */\nexport function convertJSONSchemaToOpenAPISchema(\n  jsonSchema: JSONSchema7Definition | undefined,\n  isRoot = true,\n): unknown {\n  // Handle empty object schemas: undefined at root, preserved when nested\n  if (jsonSchema == null) {\n    return undefined;\n  }\n\n  if (isEmptyObjectSchema(jsonSchema)) {\n    if (isRoot) {\n      return undefined;\n    }\n\n    if (typeof jsonSchema === 'object' && jsonSchema.description) {\n      return { type: 'object', description: jsonSchema.description };\n    }\n    return { type: 'object' };\n  }\n\n  if (typeof jsonSchema === 'boolean') {\n    return { type: 'boolean', properties: {} };\n  }\n\n  const {\n    type,\n    description,\n    required,\n    properties,\n    items,\n    allOf,\n    anyOf,\n    oneOf,\n    format,\n    const: constValue,\n    minLength,\n    enum: enumValues,\n  } = jsonSchema;\n\n  const result: Record<string, unknown> = {};\n\n  if (description) result.description = description;\n  if (required) result.required = required;\n  if (format) result.format = format;\n\n  if (constValue !== undefined) {\n    result.enum = [constValue];\n  }\n\n  // Handle type\n  if (type) {\n    if (Array.isArray(type)) {\n      const hasNull = type.includes('null');\n      const nonNullTypes = type.filter(t => t !== 'null');\n\n      if (nonNullTypes.length === 0) {\n        // Only null type\n        result.type = 'null';\n      } else {\n        // One or more non-null types: always use anyOf\n        result.anyOf = nonNullTypes.map(t => ({ type: t }));\n        if (hasNull) {\n          result.nullable = true;\n        }\n      }\n    } else {\n      result.type = type;\n    }\n  }\n\n  // Handle enum\n  if (enumValues !== undefined) {\n    result.enum = enumValues;\n  }\n\n  if (properties != null) {\n    result.properties = Object.entries(properties).reduce(\n      (acc, [key, value]) => {\n        acc[key] = convertJSONSchemaToOpenAPISchema(value, false);\n        return acc;\n      },\n      {} as Record<string, unknown>,\n    );\n  }\n\n  if (items) {\n    result.items = Array.isArray(items)\n      ? items.map(item => convertJSONSchemaToOpenAPISchema(item, false))\n      : convertJSONSchemaToOpenAPISchema(items, false);\n  }\n\n  if (allOf) {\n    result.allOf = allOf.map(item =>\n      convertJSONSchemaToOpenAPISchema(item, false),\n    );\n  }\n  if (anyOf) {\n    // Handle cases where anyOf includes a null type\n    if (\n      anyOf.some(\n        schema => typeof schema === 'object' && schema?.type === 'null',\n      )\n    ) {\n      const nonNullSchemas = anyOf.filter(\n        schema => !(typeof schema === 'object' && schema?.type === 'null'),\n      );\n\n      if (nonNullSchemas.length === 1) {\n        // If there's only one non-null schema, convert it and make it nullable\n        const converted = convertJSONSchemaToOpenAPISchema(\n          nonNullSchemas[0],\n          false,\n        );\n        if (typeof converted === 'object') {\n          result.nullable = true;\n          Object.assign(result, converted);\n        }\n      } else {\n        // If there are multiple non-null schemas, keep them in anyOf\n        result.anyOf = nonNullSchemas.map(item =>\n          convertJSONSchemaToOpenAPISchema(item, false),\n        );\n        result.nullable = true;\n      }\n    } else {\n      result.anyOf = anyOf.map(item =>\n        convertJSONSchemaToOpenAPISchema(item, false),\n      );\n    }\n  }\n  if (oneOf) {\n    result.oneOf = oneOf.map(item =>\n      convertJSONSchemaToOpenAPISchema(item, false),\n    );\n  }\n\n  if (minLength !== undefined) {\n    result.minLength = minLength;\n  }\n\n  return result;\n}\n\nfunction isEmptyObjectSchema(jsonSchema: JSONSchema7Definition): boolean {\n  return (\n    jsonSchema != null &&\n    typeof jsonSchema === 'object' &&\n    jsonSchema.type === 'object' &&\n    (jsonSchema.properties == null ||\n      Object.keys(jsonSchema.properties).length === 0) &&\n    !jsonSchema.additionalProperties\n  );\n}\n","import {\n  LanguageModelV3Prompt,\n  UnsupportedFunctionalityError,\n} from '@ai-sdk/provider';\nimport {\n  GoogleGenerativeAIContent,\n  GoogleGenerativeAIContentPart,\n  GoogleGenerativeAIPrompt,\n} from './google-generative-ai-prompt';\nimport { convertToBase64 } from '@ai-sdk/provider-utils';\n\nexport function convertToGoogleGenerativeAIMessages(\n  prompt: LanguageModelV3Prompt,\n  options?: { isGemmaModel?: boolean; providerOptionsName?: string },\n): GoogleGenerativeAIPrompt {\n  const systemInstructionParts: Array<{ text: string }> = [];\n  const contents: Array<GoogleGenerativeAIContent> = [];\n  let systemMessagesAllowed = true;\n  const isGemmaModel = options?.isGemmaModel ?? false;\n  const providerOptionsName = options?.providerOptionsName ?? 'google';\n\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case 'system': {\n        if (!systemMessagesAllowed) {\n          throw new UnsupportedFunctionalityError({\n            functionality:\n              'system messages are only supported at the beginning of the conversation',\n          });\n        }\n\n        systemInstructionParts.push({ text: content });\n        break;\n      }\n\n      case 'user': {\n        systemMessagesAllowed = false;\n\n        const parts: GoogleGenerativeAIContentPart[] = [];\n\n        for (const part of content) {\n          switch (part.type) {\n            case 'text': {\n              parts.push({ text: part.text });\n              break;\n            }\n\n            case 'file': {\n              // default to image/jpeg for unknown image/* types\n              const mediaType =\n                part.mediaType === 'image/*' ? 'image/jpeg' : part.mediaType;\n\n              parts.push(\n                part.data instanceof URL\n                  ? {\n                      fileData: {\n                        mimeType: mediaType,\n                        fileUri: part.data.toString(),\n                      },\n                    }\n                  : {\n                      inlineData: {\n                        mimeType: mediaType,\n                        data: convertToBase64(part.data),\n                      },\n                    },\n              );\n\n              break;\n            }\n          }\n        }\n\n        contents.push({ role: 'user', parts });\n        break;\n      }\n\n      case 'assistant': {\n        systemMessagesAllowed = false;\n\n        contents.push({\n          role: 'model',\n          parts: content\n            .map(part => {\n              const providerOpts =\n                part.providerOptions?.[providerOptionsName] ??\n                (providerOptionsName !== 'google'\n                  ? part.providerOptions?.google\n                  : undefined);\n              const thoughtSignature =\n                providerOpts?.thoughtSignature != null\n                  ? String(providerOpts.thoughtSignature)\n                  : undefined;\n\n              switch (part.type) {\n                case 'text': {\n                  return part.text.length === 0\n                    ? undefined\n                    : {\n                        text: part.text,\n                        thoughtSignature,\n                      };\n                }\n\n                case 'reasoning': {\n                  return part.text.length === 0\n                    ? undefined\n                    : {\n                        text: part.text,\n                        thought: true,\n                        thoughtSignature,\n                      };\n                }\n\n                case 'file': {\n                  if (part.data instanceof URL) {\n                    throw new UnsupportedFunctionalityError({\n                      functionality:\n                        'File data URLs in assistant messages are not supported',\n                    });\n                  }\n\n                  return {\n                    inlineData: {\n                      mimeType: part.mediaType,\n                      data: convertToBase64(part.data),\n                    },\n                    thoughtSignature,\n                  };\n                }\n\n                case 'tool-call': {\n                  return {\n                    functionCall: {\n                      name: part.toolName,\n                      args: part.input,\n                    },\n                    thoughtSignature,\n                  };\n                }\n              }\n            })\n            .filter(part => part !== undefined),\n        });\n        break;\n      }\n\n      case 'tool': {\n        systemMessagesAllowed = false;\n\n        const parts: GoogleGenerativeAIContentPart[] = [];\n\n        for (const part of content) {\n          if (part.type === 'tool-approval-response') {\n            continue;\n          }\n          const output = part.output;\n\n          if (output.type === 'content') {\n            for (const contentPart of output.value) {\n              switch (contentPart.type) {\n                case 'text':\n                  parts.push({\n                    functionResponse: {\n                      name: part.toolName,\n                      response: {\n                        name: part.toolName,\n                        content: contentPart.text,\n                      },\n                    },\n                  });\n                  break;\n                case 'image-data':\n                  parts.push(\n                    {\n                      inlineData: {\n                        mimeType: contentPart.mediaType,\n                        data: contentPart.data,\n                      },\n                    },\n                    {\n                      text: 'Tool executed successfully and returned this image as a response',\n                    },\n                  );\n                  break;\n                default:\n                  parts.push({ text: JSON.stringify(contentPart) });\n                  break;\n              }\n            }\n          } else {\n            parts.push({\n              functionResponse: {\n                name: part.toolName,\n                response: {\n                  name: part.toolName,\n                  content:\n                    output.type === 'execution-denied'\n                      ? (output.reason ?? 'Tool execution denied.')\n                      : output.value,\n                },\n              },\n            });\n          }\n        }\n\n        contents.push({\n          role: 'user',\n          parts,\n        });\n        break;\n      }\n    }\n  }\n\n  if (\n    isGemmaModel &&\n    systemInstructionParts.length > 0 &&\n    contents.length > 0 &&\n    contents[0].role === 'user'\n  ) {\n    const systemText = systemInstructionParts\n      .map(part => part.text)\n      .join('\\n\\n');\n\n    contents[0].parts.unshift({ text: systemText + '\\n\\n' });\n  }\n\n  return {\n    systemInstruction:\n      systemInstructionParts.length > 0 && !isGemmaModel\n        ? { parts: systemInstructionParts }\n        : undefined,\n    contents,\n  };\n}\n","export function getModelPath(modelId: string): string {\n  return modelId.includes('/') ? modelId : `models/${modelId}`;\n}\n","import { InferSchema, lazySchema, zodSchema } from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\nexport type GoogleGenerativeAIModelId =\n  // Stable models\n  // https://ai.google.dev/gemini-api/docs/models/gemini\n  | 'gemini-1.5-flash'\n  | 'gemini-1.5-flash-latest'\n  | 'gemini-1.5-flash-001'\n  | 'gemini-1.5-flash-002'\n  | 'gemini-1.5-flash-8b'\n  | 'gemini-1.5-flash-8b-latest'\n  | 'gemini-1.5-flash-8b-001'\n  | 'gemini-1.5-pro'\n  | 'gemini-1.5-pro-latest'\n  | 'gemini-1.5-pro-001'\n  | 'gemini-1.5-pro-002'\n  | 'gemini-2.0-flash'\n  | 'gemini-2.0-flash-001'\n  | 'gemini-2.0-flash-live-001'\n  | 'gemini-2.0-flash-lite'\n  | 'gemini-2.0-pro-exp-02-05'\n  | 'gemini-2.0-flash-thinking-exp-01-21'\n  | 'gemini-2.0-flash-exp'\n  | 'gemini-2.0-flash-exp-image-generation'\n  | 'gemini-2.0-flash-lite-001'\n  | 'gemini-2.5-pro'\n  | 'gemini-2.5-flash'\n  | 'gemini-2.5-flash-image'\n  | 'gemini-2.5-flash-lite'\n  | 'gemini-2.5-flash-lite-preview-09-2025'\n  | 'gemini-2.5-flash-preview-04-17'\n  | 'gemini-2.5-flash-preview-09-2025'\n  | 'gemini-2.5-flash-preview-tts'\n  | 'gemini-2.5-pro-preview-tts'\n  | 'gemini-2.5-flash-native-audio-latest'\n  | 'gemini-2.5-flash-native-audio-preview-09-2025'\n  | 'gemini-2.5-flash-native-audio-preview-12-2025'\n  | 'gemini-2.5-computer-use-preview-10-2025'\n  | 'gemini-3.1-pro-preview'\n  | 'gemini-3.1-pro-preview-customtools'\n  | 'gemini-3-pro-preview'\n  | 'gemini-3-pro-image-preview'\n  | 'gemini-3-flash-preview'\n  // latest version\n  // https://ai.google.dev/gemini-api/docs/models#latest\n  | 'gemini-pro-latest'\n  | 'gemini-flash-latest'\n  | 'gemini-flash-lite-latest'\n  | 'deep-research-pro-preview-12-2025'\n  | 'nano-banana-pro-preview'\n  | 'aqa'\n  // Experimental models\n  // https://ai.google.dev/gemini-api/docs/models/experimental-models\n  | 'gemini-2.5-pro-exp-03-25'\n  | 'gemini-exp-1206'\n  | 'gemini-robotics-er-1.5-preview'\n  | 'gemma-3-1b-it'\n  | 'gemma-3-4b-it'\n  | 'gemma-3n-e4b-it'\n  | 'gemma-3n-e2b-it'\n  | 'gemma-3-12b-it'\n  | 'gemma-3-27b-it'\n  | (string & {});\n\nexport const googleLanguageModelOptions = lazySchema(() =>\n  zodSchema(\n    z.object({\n      responseModalities: z.array(z.enum(['TEXT', 'IMAGE'])).optional(),\n\n      thinkingConfig: z\n        .object({\n          thinkingBudget: z.number().optional(),\n          includeThoughts: z.boolean().optional(),\n          // https://ai.google.dev/gemini-api/docs/gemini-3?thinking=high#thinking_level\n          thinkingLevel: z\n            .enum(['minimal', 'low', 'medium', 'high'])\n            .optional(),\n        })\n        .optional(),\n\n      /**\n       * Optional.\n       * The name of the cached content used as context to serve the prediction.\n       * Format: cachedContents/{cachedContent}\n       */\n      cachedContent: z.string().optional(),\n\n      /**\n       * Optional. Enable structured output. Default is true.\n       *\n       * This is useful when the JSON Schema contains elements that are\n       * not supported by the OpenAPI schema version that\n       * Google Generative AI uses. You can use this to disable\n       * structured outputs if you need to.\n       */\n      structuredOutputs: z.boolean().optional(),\n\n      /**\n       * Optional. A list of unique safety settings for blocking unsafe content.\n       */\n      safetySettings: z\n        .array(\n          z.object({\n            category: z.enum([\n              'HARM_CATEGORY_UNSPECIFIED',\n              'HARM_CATEGORY_HATE_SPEECH',\n              'HARM_CATEGORY_DANGEROUS_CONTENT',\n              'HARM_CATEGORY_HARASSMENT',\n              'HARM_CATEGORY_SEXUALLY_EXPLICIT',\n              'HARM_CATEGORY_CIVIC_INTEGRITY',\n            ]),\n            threshold: z.enum([\n              'HARM_BLOCK_THRESHOLD_UNSPECIFIED',\n              'BLOCK_LOW_AND_ABOVE',\n              'BLOCK_MEDIUM_AND_ABOVE',\n              'BLOCK_ONLY_HIGH',\n              'BLOCK_NONE',\n              'OFF',\n            ]),\n          }),\n        )\n        .optional(),\n\n      threshold: z\n        .enum([\n          'HARM_BLOCK_THRESHOLD_UNSPECIFIED',\n          'BLOCK_LOW_AND_ABOVE',\n          'BLOCK_MEDIUM_AND_ABOVE',\n          'BLOCK_ONLY_HIGH',\n          'BLOCK_NONE',\n          'OFF',\n        ])\n        .optional(),\n\n      /**\n       * Optional. Enables timestamp understanding for audio-only files.\n       *\n       * https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/audio-understanding\n       */\n      audioTimestamp: z.boolean().optional(),\n\n      /**\n       * Optional. Defines labels used in billing reports. Available on Vertex AI only.\n       *\n       * https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/add-labels-to-api-calls\n       */\n      labels: z.record(z.string(), z.string()).optional(),\n\n      /**\n       * Optional. If specified, the media resolution specified will be used.\n       *\n       * https://ai.google.dev/api/generate-content#MediaResolution\n       */\n      mediaResolution: z\n        .enum([\n          'MEDIA_RESOLUTION_UNSPECIFIED',\n          'MEDIA_RESOLUTION_LOW',\n          'MEDIA_RESOLUTION_MEDIUM',\n          'MEDIA_RESOLUTION_HIGH',\n        ])\n        .optional(),\n\n      /**\n       * Optional. Configures the image generation aspect ratio for Gemini models.\n       *\n       * https://ai.google.dev/gemini-api/docs/image-generation#aspect_ratios\n       */\n      imageConfig: z\n        .object({\n          aspectRatio: z\n            .enum([\n              '1:1',\n              '2:3',\n              '3:2',\n              '3:4',\n              '4:3',\n              '4:5',\n              '5:4',\n              '9:16',\n              '16:9',\n              '21:9',\n            ])\n            .optional(),\n          imageSize: z.enum(['1K', '2K', '4K']).optional(),\n        })\n        .optional(),\n\n      /**\n       * Optional. Configuration for grounding retrieval.\n       * Used to provide location context for Google Maps and Google Search grounding.\n       *\n       * https://cloud.google.com/vertex-ai/generative-ai/docs/grounding/grounding-with-google-maps\n       */\n      retrievalConfig: z\n        .object({\n          latLng: z\n            .object({\n              latitude: z.number(),\n              longitude: z.number(),\n            })\n            .optional(),\n        })\n        .optional(),\n    }),\n  ),\n);\n\nexport type GoogleLanguageModelOptions = InferSchema<\n  typeof googleLanguageModelOptions\n>;\n","import {\n  LanguageModelV3CallOptions,\n  SharedV3Warning,\n  UnsupportedFunctionalityError,\n} from '@ai-sdk/provider';\nimport { convertJSONSchemaToOpenAPISchema } from './convert-json-schema-to-openapi-schema';\nimport { GoogleGenerativeAIModelId } from './google-generative-ai-options';\n\nexport function prepareTools({\n  tools,\n  toolChoice,\n  modelId,\n}: {\n  tools: LanguageModelV3CallOptions['tools'];\n  toolChoice?: LanguageModelV3CallOptions['toolChoice'];\n  modelId: GoogleGenerativeAIModelId;\n}): {\n  tools:\n    | Array<\n        | {\n            functionDeclarations: Array<{\n              name: string;\n              description: string;\n              parameters: unknown;\n            }>;\n          }\n        | Record<string, any>\n      >\n    | undefined;\n  toolConfig:\n    | undefined\n    | {\n        functionCallingConfig: {\n          mode: 'AUTO' | 'NONE' | 'ANY';\n          allowedFunctionNames?: string[];\n        };\n      };\n  toolWarnings: SharedV3Warning[];\n} {\n  // when the tools array is empty, change it to undefined to prevent errors:\n  tools = tools?.length ? tools : undefined;\n\n  const toolWarnings: SharedV3Warning[] = [];\n\n  const isLatest = (\n    [\n      'gemini-flash-latest',\n      'gemini-flash-lite-latest',\n      'gemini-pro-latest',\n    ] as const satisfies GoogleGenerativeAIModelId[]\n  ).some(id => id === modelId);\n  const isGemini2orNewer =\n    modelId.includes('gemini-2') || modelId.includes('gemini-3') || isLatest;\n  const supportsDynamicRetrieval =\n    modelId.includes('gemini-1.5-flash') && !modelId.includes('-8b');\n  const supportsFileSearch =\n    modelId.includes('gemini-2.5') || modelId.includes('gemini-3');\n\n  if (tools == null) {\n    return { tools: undefined, toolConfig: undefined, toolWarnings };\n  }\n\n  // Check for mixed tool types and add warnings\n  const hasFunctionTools = tools.some(tool => tool.type === 'function');\n  const hasProviderTools = tools.some(tool => tool.type === 'provider');\n\n  if (hasFunctionTools && hasProviderTools) {\n    toolWarnings.push({\n      type: 'unsupported',\n      feature: `combination of function and provider-defined tools`,\n    });\n  }\n\n  if (hasProviderTools) {\n    const googleTools: any[] = [];\n\n    const ProviderTools = tools.filter(tool => tool.type === 'provider');\n    ProviderTools.forEach(tool => {\n      switch (tool.id) {\n        case 'google.google_search':\n          if (isGemini2orNewer) {\n            googleTools.push({ googleSearch: {} });\n          } else if (supportsDynamicRetrieval) {\n            // For non-Gemini-2 models that don't support dynamic retrieval, use basic googleSearchRetrieval\n            googleTools.push({\n              googleSearchRetrieval: {\n                dynamicRetrievalConfig: {\n                  mode: tool.args.mode as\n                    | 'MODE_DYNAMIC'\n                    | 'MODE_UNSPECIFIED'\n                    | undefined,\n                  dynamicThreshold: tool.args.dynamicThreshold as\n                    | number\n                    | undefined,\n                },\n              },\n            });\n          } else {\n            googleTools.push({ googleSearchRetrieval: {} });\n          }\n          break;\n        case 'google.enterprise_web_search':\n          if (isGemini2orNewer) {\n            googleTools.push({ enterpriseWebSearch: {} });\n          } else {\n            toolWarnings.push({\n              type: 'unsupported',\n              feature: `provider-defined tool ${tool.id}`,\n              details: 'Enterprise Web Search requires Gemini 2.0 or newer.',\n            });\n          }\n          break;\n        case 'google.url_context':\n          if (isGemini2orNewer) {\n            googleTools.push({ urlContext: {} });\n          } else {\n            toolWarnings.push({\n              type: 'unsupported',\n              feature: `provider-defined tool ${tool.id}`,\n              details:\n                'The URL context tool is not supported with other Gemini models than Gemini 2.',\n            });\n          }\n          break;\n        case 'google.code_execution':\n          if (isGemini2orNewer) {\n            googleTools.push({ codeExecution: {} });\n          } else {\n            toolWarnings.push({\n              type: 'unsupported',\n              feature: `provider-defined tool ${tool.id}`,\n              details:\n                'The code execution tools is not supported with other Gemini models than Gemini 2.',\n            });\n          }\n          break;\n        case 'google.file_search':\n          if (supportsFileSearch) {\n            googleTools.push({ fileSearch: { ...tool.args } });\n          } else {\n            toolWarnings.push({\n              type: 'unsupported',\n              feature: `provider-defined tool ${tool.id}`,\n              details:\n                'The file search tool is only supported with Gemini 2.5 models and Gemini 3 models.',\n            });\n          }\n          break;\n        case 'google.vertex_rag_store':\n          if (isGemini2orNewer) {\n            googleTools.push({\n              retrieval: {\n                vertex_rag_store: {\n                  rag_resources: {\n                    rag_corpus: tool.args.ragCorpus,\n                  },\n                  similarity_top_k: tool.args.topK as number | undefined,\n                },\n              },\n            });\n          } else {\n            toolWarnings.push({\n              type: 'unsupported',\n              feature: `provider-defined tool ${tool.id}`,\n              details:\n                'The RAG store tool is not supported with other Gemini models than Gemini 2.',\n            });\n          }\n          break;\n        case 'google.google_maps':\n          if (isGemini2orNewer) {\n            googleTools.push({ googleMaps: {} });\n          } else {\n            toolWarnings.push({\n              type: 'unsupported',\n              feature: `provider-defined tool ${tool.id}`,\n              details:\n                'The Google Maps grounding tool is not supported with Gemini models other than Gemini 2 or newer.',\n            });\n          }\n          break;\n        default:\n          toolWarnings.push({\n            type: 'unsupported',\n            feature: `provider-defined tool ${tool.id}`,\n          });\n          break;\n      }\n    });\n\n    return {\n      tools: googleTools.length > 0 ? googleTools : undefined,\n      toolConfig: undefined,\n      toolWarnings,\n    };\n  }\n\n  const functionDeclarations = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case 'function':\n        functionDeclarations.push({\n          name: tool.name,\n          description: tool.description ?? '',\n          parameters: convertJSONSchemaToOpenAPISchema(tool.inputSchema),\n        });\n        break;\n      default:\n        toolWarnings.push({\n          type: 'unsupported',\n          feature: `function tool ${tool.name}`,\n        });\n        break;\n    }\n  }\n\n  if (toolChoice == null) {\n    return {\n      tools: [{ functionDeclarations }],\n      toolConfig: undefined,\n      toolWarnings,\n    };\n  }\n\n  const type = toolChoice.type;\n\n  switch (type) {\n    case 'auto':\n      return {\n        tools: [{ functionDeclarations }],\n        toolConfig: { functionCallingConfig: { mode: 'AUTO' } },\n        toolWarnings,\n      };\n    case 'none':\n      return {\n        tools: [{ functionDeclarations }],\n        toolConfig: { functionCallingConfig: { mode: 'NONE' } },\n        toolWarnings,\n      };\n    case 'required':\n      return {\n        tools: [{ functionDeclarations }],\n        toolConfig: { functionCallingConfig: { mode: 'ANY' } },\n        toolWarnings,\n      };\n    case 'tool':\n      return {\n        tools: [{ functionDeclarations }],\n        toolConfig: {\n          functionCallingConfig: {\n            mode: 'ANY',\n            allowedFunctionNames: [toolChoice.toolName],\n          },\n        },\n        toolWarnings,\n      };\n    default: {\n      const _exhaustiveCheck: never = type;\n      throw new UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`,\n      });\n    }\n  }\n}\n","import { LanguageModelV3FinishReason } from '@ai-sdk/provider';\n\nexport function mapGoogleGenerativeAIFinishReason({\n  finishReason,\n  hasToolCalls,\n}: {\n  finishReason: string | null | undefined;\n  hasToolCalls: boolean;\n}): LanguageModelV3FinishReason['unified'] {\n  switch (finishReason) {\n    case 'STOP':\n      return hasToolCalls ? 'tool-calls' : 'stop';\n    case 'MAX_TOKENS':\n      return 'length';\n    case 'IMAGE_SAFETY':\n    case 'RECITATION':\n    case 'SAFETY':\n    case 'BLOCKLIST':\n    case 'PROHIBITED_CONTENT':\n    case 'SPII':\n      return 'content-filter';\n    case 'MALFORMED_FUNCTION_CALL':\n      return 'error';\n    case 'FINISH_REASON_UNSPECIFIED':\n    case 'OTHER':\n    default:\n      return 'other';\n  }\n}\n","import { createProviderToolFactoryWithOutputSchema } from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\n/**\n * A tool that enables the model to generate and run Python code.\n *\n * @note Ensure the selected model supports Code Execution.\n * Multi-tool usage with the code execution tool is typically compatible with Gemini >=2 models.\n *\n * @see https://ai.google.dev/gemini-api/docs/code-execution (Google AI)\n * @see https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/code-execution-api (Vertex AI)\n */\nexport const codeExecution = createProviderToolFactoryWithOutputSchema<\n  {\n    language: string;\n    code: string;\n  },\n  {\n    outcome: string;\n    output: string;\n  },\n  {}\n>({\n  id: 'google.code_execution',\n  inputSchema: z.object({\n    language: z.string().describe('The programming language of the code.'),\n    code: z.string().describe('The code to be executed.'),\n  }),\n  outputSchema: z.object({\n    outcome: z\n      .string()\n      .describe('The outcome of the execution (e.g., \"OUTCOME_OK\").'),\n    output: z.string().describe('The output from the code execution.'),\n  }),\n});\n","import {\n  createProviderToolFactory,\n  lazySchema,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\n// https://cloud.google.com/vertex-ai/generative-ai/docs/grounding/web-grounding-enterprise\n\nexport const enterpriseWebSearch = createProviderToolFactory<\n  {\n    // Enterprise Web Search does not have any input schema\n  },\n  {}\n>({\n  id: 'google.enterprise_web_search',\n  inputSchema: lazySchema(() => zodSchema(z.object({}))),\n});\n","import {\n  createProviderToolFactory,\n  lazySchema,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\n/** Tool to retrieve knowledge from the File Search Stores. */\nconst fileSearchArgsBaseSchema = z\n  .object({\n    /** The names of the file_search_stores to retrieve from.\n     *  Example: `fileSearchStores/my-file-search-store-123`\n     */\n    fileSearchStoreNames: z\n      .array(z.string())\n      .describe(\n        'The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`',\n      ),\n    /** The number of file search retrieval chunks to retrieve. */\n    topK: z\n      .number()\n      .int()\n      .positive()\n      .describe('The number of file search retrieval chunks to retrieve.')\n      .optional(),\n\n    /** Metadata filter to apply to the file search retrieval documents.\n     *  See https://google.aip.dev/160 for the syntax of the filter expression.\n     */\n    metadataFilter: z\n      .string()\n      .describe(\n        'Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.',\n      )\n      .optional(),\n  })\n  .passthrough();\n\nexport type GoogleFileSearchToolArgs = z.infer<typeof fileSearchArgsBaseSchema>;\n\nconst fileSearchArgsSchema = lazySchema(() =>\n  zodSchema(fileSearchArgsBaseSchema),\n);\n\nexport const fileSearch = createProviderToolFactory<\n  {},\n  GoogleFileSearchToolArgs\n>({\n  id: 'google.file_search',\n  inputSchema: fileSearchArgsSchema,\n});\n","import {\n  createProviderToolFactory,\n  lazySchema,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\n// https://ai.google.dev/gemini-api/docs/maps-grounding\n// https://cloud.google.com/vertex-ai/generative-ai/docs/grounding/grounding-with-google-maps\n\nexport const googleMaps = createProviderToolFactory<{}, {}>({\n  id: 'google.google_maps',\n  inputSchema: lazySchema(() => zodSchema(z.object({}))),\n});\n","import {\n  createProviderToolFactory,\n  lazySchema,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\n// https://ai.google.dev/gemini-api/docs/google-search\n// https://ai.google.dev/api/generate-content#GroundingSupport\n// https://cloud.google.com/vertex-ai/generative-ai/docs/grounding/grounding-with-google-search\n\nexport const googleSearch = createProviderToolFactory<\n  {},\n  {\n    /**\n     * The mode of the predictor to be used in dynamic retrieval. The following modes are supported:\n     *  - MODE_DYNAMIC: Run retrieval only when system decides it is necessary\n     *  - MODE_UNSPECIFIED: Always trigger retrieval\n     * @default MODE_UNSPECIFIED\n     */\n    mode?: 'MODE_DYNAMIC' | 'MODE_UNSPECIFIED';\n\n    /**\n     * The threshold to be used in dynamic retrieval (if not set, a system default value is used).\n     */\n    dynamicThreshold?: number;\n  }\n>({\n  id: 'google.google_search',\n  inputSchema: lazySchema(() =>\n    zodSchema(\n      z.object({\n        mode: z\n          .enum(['MODE_DYNAMIC', 'MODE_UNSPECIFIED'])\n          .default('MODE_UNSPECIFIED'),\n        dynamicThreshold: z.number().default(1),\n      }),\n    ),\n  ),\n});\n","import {\n  createProviderToolFactory,\n  lazySchema,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\nexport const urlContext = createProviderToolFactory<\n  {\n    // Url context does not have any input schema, it will directly use the url from the prompt\n  },\n  {}\n>({\n  id: 'google.url_context',\n  inputSchema: lazySchema(() => zodSchema(z.object({}))),\n});\n","import { createProviderToolFactory } from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\n\n// https://cloud.google.com/vertex-ai/generative-ai/docs/rag-engine/use-vertexai-search#generate-content-using-gemini-api\n// https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/rag-output-explained\n\n/**\n * A tool that enables the model to perform RAG searches against a Vertex RAG Store.\n *\n * @note Only works with Vertex Gemini models.\n */\nexport const vertexRagStore = createProviderToolFactory<\n  {},\n  {\n    /**\n     * RagCorpus resource names, eg: projects/{project}/locations/{location}/ragCorpora/{rag_corpus}\n     */\n    ragCorpus: string;\n\n    /**\n     * The number of top contexts to retrieve.\n     */\n    topK?: number;\n  }\n>({\n  id: 'google.vertex_rag_store',\n  inputSchema: z.object({\n    ragCorpus: z.string(),\n    topK: z.number().optional(),\n  }),\n});\n","import { codeExecution } from './tool/code-execution';\nimport { enterpriseWebSearch } from './tool/enterprise-web-search';\nimport { fileSearch } from './tool/file-search';\nimport { googleMaps } from './tool/google-maps';\nimport { googleSearch } from './tool/google-search';\nimport { urlContext } from './tool/url-context';\nimport { vertexRagStore } from './tool/vertex-rag-store';\n\nexport const googleTools = {\n  /**\n   * Creates a Google search tool that gives Google direct access to real-time web content.\n   * Must have name \"google_search\".\n   */\n  googleSearch,\n\n  /**\n   * Creates an Enterprise Web Search tool for grounding responses using a compliance-focused web index.\n   * Designed for highly-regulated industries (finance, healthcare, public sector).\n   * Does not log customer data and supports VPC service controls.\n   * Must have name \"enterprise_web_search\".\n   *\n   * @note Only available on Vertex AI. Requires Gemini 2.0 or newer.\n   *\n   * @see https://cloud.google.com/vertex-ai/generative-ai/docs/grounding/web-grounding-enterprise\n   */\n  enterpriseWebSearch,\n\n  /**\n   * Creates a Google Maps grounding tool that gives the model access to Google Maps data.\n   * Must have name \"google_maps\".\n   *\n   * @see https://ai.google.dev/gemini-api/docs/maps-grounding\n   * @see https://cloud.google.com/vertex-ai/generative-ai/docs/grounding/grounding-with-google-maps\n   */\n  googleMaps,\n\n  /**\n   * Creates a URL context tool that gives Google direct access to real-time web content.\n   * Must have name \"url_context\".\n   */\n  urlContext,\n\n  /**\n   * Enables Retrieval Augmented Generation (RAG) via the Gemini File Search tool.\n   * Must have name \"file_search\".\n   *\n   * @param fileSearchStoreNames - Fully-qualified File Search store resource names.\n   * @param metadataFilter - Optional filter expression to restrict the files that can be retrieved.\n   * @param topK - Optional result limit for the number of chunks returned from File Search.\n   *\n   * @see https://ai.google.dev/gemini-api/docs/file-search\n   */\n  fileSearch,\n  /**\n   * A tool that enables the model to generate and run Python code.\n   * Must have name \"code_execution\".\n   *\n   * @note Ensure the selected model supports Code Execution.\n   * Multi-tool usage with the code execution tool is typically compatible with Gemini >=2 models.\n   *\n   * @see https://ai.google.dev/gemini-api/docs/code-execution (Google AI)\n   * @see https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/code-execution-api (Vertex AI)\n   */\n  codeExecution,\n\n  /**\n   * Creates a Vertex RAG Store tool that enables the model to perform RAG searches against a Vertex RAG Store.\n   * Must have name \"vertex_rag_store\".\n   */\n  vertexRagStore,\n};\n","import {\n  ImageModelV3,\n  LanguageModelV3Prompt,\n  SharedV3Warning,\n} from '@ai-sdk/provider';\nimport {\n  combineHeaders,\n  convertToBase64,\n  createJsonResponseHandler,\n  FetchFunction,\n  generateId as defaultGenerateId,\n  type InferSchema,\n  lazySchema,\n  parseProviderOptions,\n  postJsonToApi,\n  Resolvable,\n  resolve,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\nimport { googleFailedResponseHandler } from './google-error';\nimport {\n  GoogleGenerativeAIImageModelId,\n  GoogleGenerativeAIImageSettings,\n} from './google-generative-ai-image-settings';\nimport { GoogleGenerativeAILanguageModel } from './google-generative-ai-language-model';\nimport type { GoogleLanguageModelOptions } from './google-generative-ai-options';\n\ninterface GoogleGenerativeAIImageModelConfig {\n  provider: string;\n  baseURL: string;\n  headers?: Resolvable<Record<string, string | undefined>>;\n  fetch?: FetchFunction;\n  generateId?: () => string;\n  _internal?: {\n    currentDate?: () => Date;\n  };\n}\n\nexport class GoogleGenerativeAIImageModel implements ImageModelV3 {\n  readonly specificationVersion = 'v3';\n\n  get maxImagesPerCall(): number {\n    if (this.settings.maxImagesPerCall != null) {\n      return this.settings.maxImagesPerCall;\n    }\n    // https://docs.cloud.google.com/vertex-ai/generative-ai/docs/models/gemini/2-5-flash-image\n    if (isGeminiModel(this.modelId)) {\n      return 10;\n    }\n    // https://ai.google.dev/gemini-api/docs/imagen#imagen-model\n    return 4;\n  }\n\n  get provider(): string {\n    return this.config.provider;\n  }\n\n  constructor(\n    readonly modelId: GoogleGenerativeAIImageModelId,\n    private readonly settings: GoogleGenerativeAIImageSettings,\n    private readonly config: GoogleGenerativeAIImageModelConfig,\n  ) {}\n\n  async doGenerate(\n    options: Parameters<ImageModelV3['doGenerate']>[0],\n  ): Promise<Awaited<ReturnType<ImageModelV3['doGenerate']>>> {\n    // Gemini image models use the language model API internally\n    if (isGeminiModel(this.modelId)) {\n      return this.doGenerateGemini(options);\n    }\n    return this.doGenerateImagen(options);\n  }\n\n  private async doGenerateImagen(\n    options: Parameters<ImageModelV3['doGenerate']>[0],\n  ): Promise<Awaited<ReturnType<ImageModelV3['doGenerate']>>> {\n    const {\n      prompt,\n      n = 1,\n      size,\n      aspectRatio = '1:1',\n      seed,\n      providerOptions,\n      headers,\n      abortSignal,\n      files,\n      mask,\n    } = options;\n    const warnings: Array<SharedV3Warning> = [];\n\n    // Imagen API endpoints do not support image editing\n    if (files != null && files.length > 0) {\n      throw new Error(\n        'Google Generative AI does not support image editing with Imagen models. ' +\n          'Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.',\n      );\n    }\n\n    if (mask != null) {\n      throw new Error(\n        'Google Generative AI does not support image editing with masks. ' +\n          'Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.',\n      );\n    }\n\n    if (size != null) {\n      warnings.push({\n        type: 'unsupported',\n        feature: 'size',\n        details:\n          'This model does not support the `size` option. Use `aspectRatio` instead.',\n      });\n    }\n\n    if (seed != null) {\n      warnings.push({\n        type: 'unsupported',\n        feature: 'seed',\n        details:\n          'This model does not support the `seed` option through this provider.',\n      });\n    }\n\n    const googleOptions = await parseProviderOptions({\n      provider: 'google',\n      providerOptions,\n      schema: googleImageModelOptionsSchema,\n    });\n\n    const currentDate = this.config._internal?.currentDate?.() ?? new Date();\n\n    const parameters: Record<string, unknown> = {\n      sampleCount: n,\n    };\n\n    if (aspectRatio != null) {\n      parameters.aspectRatio = aspectRatio;\n    }\n\n    if (googleOptions) {\n      Object.assign(parameters, googleOptions);\n    }\n\n    const body = {\n      instances: [{ prompt }],\n      parameters,\n    };\n\n    const { responseHeaders, value: response } = await postJsonToApi<{\n      predictions: Array<{ bytesBase64Encoded: string }>;\n    }>({\n      url: `${this.config.baseURL}/models/${this.modelId}:predict`,\n      headers: combineHeaders(await resolve(this.config.headers), headers),\n      body,\n      failedResponseHandler: googleFailedResponseHandler,\n      successfulResponseHandler: createJsonResponseHandler(\n        googleImageResponseSchema,\n      ),\n      abortSignal,\n      fetch: this.config.fetch,\n    });\n    return {\n      images: response.predictions.map(\n        (p: { bytesBase64Encoded: string }) => p.bytesBase64Encoded,\n      ),\n      warnings,\n      providerMetadata: {\n        google: {\n          images: response.predictions.map(() => ({\n            // Add any prediction-specific metadata here\n          })),\n        },\n      },\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n      },\n    };\n  }\n\n  private async doGenerateGemini(\n    options: Parameters<ImageModelV3['doGenerate']>[0],\n  ): Promise<Awaited<ReturnType<ImageModelV3['doGenerate']>>> {\n    const {\n      prompt,\n      n,\n      size,\n      aspectRatio,\n      seed,\n      providerOptions,\n      headers,\n      abortSignal,\n      files,\n      mask,\n    } = options;\n    const warnings: Array<SharedV3Warning> = [];\n\n    // Gemini does not support mask-based inpainting\n    if (mask != null) {\n      throw new Error(\n        'Gemini image models do not support mask-based image editing.',\n      );\n    }\n\n    // Gemini does not support generating multiple images per call via n parameter\n    if (n != null && n > 1) {\n      throw new Error(\n        'Gemini image models do not support generating a set number of images per call. Use n=1 or omit the n parameter.',\n      );\n    }\n\n    if (size != null) {\n      warnings.push({\n        type: 'unsupported',\n        feature: 'size',\n        details:\n          'This model does not support the `size` option. Use `aspectRatio` instead.',\n      });\n    }\n\n    // Build user message content for language model\n    const userContent: Array<\n      | { type: 'text'; text: string }\n      | { type: 'file'; data: string | Uint8Array | URL; mediaType: string }\n    > = [];\n\n    // Add text prompt\n    if (prompt != null) {\n      userContent.push({ type: 'text', text: prompt });\n    }\n\n    // Add input images for editing\n    if (files != null && files.length > 0) {\n      for (const file of files) {\n        if (file.type === 'url') {\n          userContent.push({\n            type: 'file',\n            data: new URL(file.url),\n            mediaType: 'image/*',\n          });\n        } else {\n          userContent.push({\n            type: 'file',\n            data:\n              typeof file.data === 'string'\n                ? file.data\n                : new Uint8Array(file.data),\n            mediaType: file.mediaType,\n          });\n        }\n      }\n    }\n\n    const languageModelPrompt: LanguageModelV3Prompt = [\n      { role: 'user', content: userContent },\n    ];\n\n    // Instantiate language model\n    const languageModel = new GoogleGenerativeAILanguageModel(this.modelId, {\n      provider: this.config.provider,\n      baseURL: this.config.baseURL,\n      headers: this.config.headers ?? {},\n      fetch: this.config.fetch,\n      generateId: this.config.generateId ?? defaultGenerateId,\n    });\n\n    // Call language model with image-only response modality\n    const result = await languageModel.doGenerate({\n      prompt: languageModelPrompt,\n      seed,\n      providerOptions: {\n        google: {\n          responseModalities: ['IMAGE'],\n          imageConfig: aspectRatio\n            ? {\n                aspectRatio: aspectRatio as NonNullable<\n                  GoogleLanguageModelOptions['imageConfig']\n                >['aspectRatio'],\n              }\n            : undefined,\n          ...((providerOptions?.google as Omit<\n            GoogleLanguageModelOptions,\n            'responseModalities' | 'imageConfig'\n          >) ?? {}),\n        } satisfies GoogleLanguageModelOptions,\n      },\n      headers,\n      abortSignal,\n    });\n\n    const currentDate = this.config._internal?.currentDate?.() ?? new Date();\n\n    // Extract images from language model response\n    const images: string[] = [];\n    for (const part of result.content) {\n      if (part.type === 'file' && part.mediaType.startsWith('image/')) {\n        images.push(convertToBase64(part.data));\n      }\n    }\n\n    return {\n      images,\n      warnings,\n      providerMetadata: {\n        google: {\n          images: images.map(() => ({})),\n        },\n      },\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: result.response?.headers,\n      },\n      usage: result.usage\n        ? {\n            inputTokens: result.usage.inputTokens.total,\n            outputTokens: result.usage.outputTokens.total,\n            totalTokens:\n              (result.usage.inputTokens.total ?? 0) +\n              (result.usage.outputTokens.total ?? 0),\n          }\n        : undefined,\n    };\n  }\n}\n\nfunction isGeminiModel(modelId: string): boolean {\n  return modelId.startsWith('gemini-');\n}\n\n// minimal version of the schema\nconst googleImageResponseSchema = lazySchema(() =>\n  zodSchema(\n    z.object({\n      predictions: z\n        .array(z.object({ bytesBase64Encoded: z.string() }))\n        .default([]),\n    }),\n  ),\n);\n\n// Note: For the initial GA launch of Imagen 3, safety filters are not configurable.\n// https://ai.google.dev/gemini-api/docs/imagen#imagen-model\nconst googleImageModelOptionsSchema = lazySchema(() =>\n  zodSchema(\n    z.object({\n      personGeneration: z\n        .enum(['dont_allow', 'allow_adult', 'allow_all'])\n        .nullish(),\n      aspectRatio: z.enum(['1:1', '3:4', '4:3', '9:16', '16:9']).nullish(),\n    }),\n  ),\n);\n\nexport type GoogleImageModelOptions = InferSchema<\n  typeof googleImageModelOptionsSchema\n>;\n","import {\n  AISDKError,\n  type Experimental_VideoModelV3,\n  type SharedV3Warning,\n} from '@ai-sdk/provider';\nimport {\n  combineHeaders,\n  convertUint8ArrayToBase64,\n  createJsonResponseHandler,\n  delay,\n  type FetchFunction,\n  getFromApi,\n  lazySchema,\n  parseProviderOptions,\n  postJsonToApi,\n  type Resolvable,\n  resolve,\n  zodSchema,\n} from '@ai-sdk/provider-utils';\nimport { z } from 'zod/v4';\nimport { googleFailedResponseHandler } from './google-error';\nimport type { GoogleGenerativeAIVideoModelId } from './google-generative-ai-video-settings';\n\nexport type GoogleVideoModelOptions = {\n  // Polling configuration\n  pollIntervalMs?: number | null;\n  pollTimeoutMs?: number | null;\n\n  // Video generation options\n  personGeneration?: 'dont_allow' | 'allow_adult' | 'allow_all' | null;\n  negativePrompt?: string | null;\n\n  // Reference images (for style/asset reference)\n  referenceImages?: Array<{\n    bytesBase64Encoded?: string;\n    gcsUri?: string;\n  }> | null;\n\n  [key: string]: unknown; // For passthrough\n};\n\ninterface GoogleGenerativeAIVideoModelConfig {\n  provider: string;\n  baseURL: string;\n  headers?: Resolvable<Record<string, string | undefined>>;\n  fetch?: FetchFunction;\n  generateId?: () => string;\n  _internal?: {\n    currentDate?: () => Date;\n  };\n}\n\nexport class GoogleGenerativeAIVideoModel implements Experimental_VideoModelV3 {\n  readonly specificationVersion = 'v3';\n\n  get provider(): string {\n    return this.config.provider;\n  }\n\n  get maxVideosPerCall(): number {\n    // Google supports multiple videos via sampleCount\n    return 4;\n  }\n\n  constructor(\n    readonly modelId: GoogleGenerativeAIVideoModelId,\n    private readonly config: GoogleGenerativeAIVideoModelConfig,\n  ) {}\n\n  async doGenerate(\n    options: Parameters<Experimental_VideoModelV3['doGenerate']>[0],\n  ): Promise<Awaited<ReturnType<Experimental_VideoModelV3['doGenerate']>>> {\n    const currentDate = this.config._internal?.currentDate?.() ?? new Date();\n    const warnings: SharedV3Warning[] = [];\n\n    const googleOptions = (await parseProviderOptions({\n      provider: 'google',\n      providerOptions: options.providerOptions,\n      schema: googleVideoModelOptionsSchema,\n    })) as GoogleVideoModelOptions | undefined;\n\n    const instances: Array<Record<string, unknown>> = [{}];\n    const instance = instances[0];\n\n    if (options.prompt != null) {\n      instance.prompt = options.prompt;\n    }\n\n    // Handle image-to-video: convert image to base64\n    if (options.image != null) {\n      if (options.image.type === 'url') {\n        warnings.push({\n          type: 'unsupported',\n          feature: 'URL-based image input',\n          details:\n            'Google Generative AI video models require base64-encoded images. URL will be ignored.',\n        });\n      } else {\n        const base64Data =\n          typeof options.image.data === 'string'\n            ? options.image.data\n            : convertUint8ArrayToBase64(options.image.data);\n\n        instance.image = {\n          inlineData: {\n            mimeType: options.image.mediaType || 'image/png',\n            data: base64Data,\n          },\n        };\n      }\n    }\n\n    if (googleOptions?.referenceImages != null) {\n      instance.referenceImages = googleOptions.referenceImages.map(refImg => {\n        if (refImg.bytesBase64Encoded) {\n          return {\n            inlineData: {\n              mimeType: 'image/png',\n              data: refImg.bytesBase64Encoded,\n            },\n          };\n        } else if (refImg.gcsUri) {\n          return {\n            gcsUri: refImg.gcsUri,\n          };\n        }\n        return refImg;\n      });\n    }\n\n    const parameters: Record<string, unknown> = {\n      sampleCount: options.n,\n    };\n\n    if (options.aspectRatio) {\n      parameters.aspectRatio = options.aspectRatio;\n    }\n\n    if (options.resolution) {\n      const resolutionMap: Record<string, string> = {\n        '1280x720': '720p',\n        '1920x1080': '1080p',\n        '3840x2160': '4k',\n      };\n      parameters.resolution =\n        resolutionMap[options.resolution] || options.resolution;\n    }\n\n    if (options.duration) {\n      parameters.durationSeconds = options.duration;\n    }\n\n    if (options.seed) {\n      parameters.seed = options.seed;\n    }\n\n    if (googleOptions != null) {\n      const opts = googleOptions as GoogleVideoModelOptions;\n\n      if (\n        opts.personGeneration !== undefined &&\n        opts.personGeneration !== null\n      ) {\n        parameters.personGeneration = opts.personGeneration;\n      }\n      if (opts.negativePrompt !== undefined && opts.negativePrompt !== null) {\n        parameters.negativePrompt = opts.negativePrompt;\n      }\n\n      for (const [key, value] of Object.entries(opts)) {\n        if (\n          ![\n            'pollIntervalMs',\n            'pollTimeoutMs',\n            'personGeneration',\n            'negativePrompt',\n            'referenceImages',\n          ].includes(key)\n        ) {\n          parameters[key] = value;\n        }\n      }\n    }\n\n    const { value: operation } = await postJsonToApi({\n      url: `${this.config.baseURL}/models/${this.modelId}:predictLongRunning`,\n      headers: combineHeaders(\n        await resolve(this.config.headers),\n        options.headers,\n      ),\n      body: {\n        instances,\n        parameters,\n      },\n      successfulResponseHandler: createJsonResponseHandler(\n        googleOperationSchema,\n      ),\n      failedResponseHandler: googleFailedResponseHandler,\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch,\n    });\n\n    const operationName = operation.name;\n    if (!operationName) {\n      throw new AISDKError({\n        name: 'GOOGLE_VIDEO_GENERATION_ERROR',\n        message: 'No operation name returned from API',\n      });\n    }\n\n    const pollIntervalMs = googleOptions?.pollIntervalMs ?? 10000; // 10 seconds (per Google docs)\n    const pollTimeoutMs = googleOptions?.pollTimeoutMs ?? 600000; // 10 minutes\n\n    const startTime = Date.now();\n    let finalOperation = operation;\n    let responseHeaders: Record<string, string> | undefined;\n\n    while (!finalOperation.done) {\n      if (Date.now() - startTime > pollTimeoutMs) {\n        throw new AISDKError({\n          name: 'GOOGLE_VIDEO_GENERATION_TIMEOUT',\n          message: `Video generation timed out after ${pollTimeoutMs}ms`,\n        });\n      }\n\n      await delay(pollIntervalMs);\n\n      if (options.abortSignal?.aborted) {\n        throw new AISDKError({\n          name: 'GOOGLE_VIDEO_GENERATION_ABORTED',\n          message: 'Video generation request was aborted',\n        });\n      }\n\n      const { value: statusOperation, responseHeaders: pollHeaders } =\n        await getFromApi({\n          url: `${this.config.baseURL}/${operationName}`,\n          headers: combineHeaders(\n            await resolve(this.config.headers),\n            options.headers,\n          ),\n          successfulResponseHandler: createJsonResponseHandler(\n            googleOperationSchema,\n          ),\n          failedResponseHandler: googleFailedResponseHandler,\n          abortSignal: options.abortSignal,\n          fetch: this.config.fetch,\n        });\n\n      finalOperation = statusOperation;\n      responseHeaders = pollHeaders;\n    }\n\n    if (finalOperation.error) {\n      throw new AISDKError({\n        name: 'GOOGLE_VIDEO_GENERATION_FAILED',\n        message: `Video generation failed: ${finalOperation.error.message}`,\n      });\n    }\n\n    const response = finalOperation.response;\n    if (\n      !response?.generateVideoResponse?.generatedSamples ||\n      response.generateVideoResponse.generatedSamples.length === 0\n    ) {\n      throw new AISDKError({\n        name: 'GOOGLE_VIDEO_GENERATION_ERROR',\n        message: `No videos in response. Response: ${JSON.stringify(finalOperation)}`,\n      });\n    }\n\n    const videos: Array<{ type: 'url'; url: string; mediaType: string }> = [];\n    const videoMetadata: Array<{ uri: string }> = [];\n\n    // Get API key from headers to append to download URLs\n    const resolvedHeaders = await resolve(this.config.headers);\n    const apiKey = resolvedHeaders?.['x-goog-api-key'];\n\n    for (const generatedSample of response.generateVideoResponse\n      .generatedSamples) {\n      if (generatedSample.video?.uri) {\n        // Append API key to URL for authentication during download\n        const urlWithAuth = apiKey\n          ? `${generatedSample.video.uri}${generatedSample.video.uri.includes('?') ? '&' : '?'}key=${apiKey}`\n          : generatedSample.video.uri;\n\n        videos.push({\n          type: 'url',\n          url: urlWithAuth,\n          mediaType: 'video/mp4',\n        });\n        videoMetadata.push({\n          uri: generatedSample.video.uri,\n        });\n      }\n    }\n\n    if (videos.length === 0) {\n      throw new AISDKError({\n        name: 'GOOGLE_VIDEO_GENERATION_ERROR',\n        message: 'No valid videos in response',\n      });\n    }\n\n    return {\n      videos,\n      warnings,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n      },\n      providerMetadata: {\n        google: {\n          videos: videoMetadata,\n        },\n      },\n    };\n  }\n}\n\nconst googleOperationSchema = z.object({\n  name: z.string().nullish(),\n  done: z.boolean().nullish(),\n  error: z\n    .object({\n      code: z.number().nullish(),\n      message: z.string(),\n      status: z.string().nullish(),\n    })\n    .nullish(),\n  response: z\n    .object({\n      generateVideoResponse: z\n        .object({\n          generatedSamples: z\n            .array(\n              z.object({\n                video: z\n                  .object({\n                    uri: z.string().nullish(),\n                  })\n                  .nullish(),\n              }),\n            )\n            .nullish(),\n        })\n        .nullish(),\n    })\n    .nullish(),\n});\n\nconst googleVideoModelOptionsSchema = lazySchema(() =>\n  zodSchema(\n    z\n      .object({\n        pollIntervalMs: z.number().positive().nullish(),\n        pollTimeoutMs: z.number().positive().nullish(),\n        personGeneration: z\n          .enum(['dont_allow', 'allow_adult', 'allow_all'])\n          .nullish(),\n        negativePrompt: z.string().nullish(),\n        referenceImages: z\n          .array(\n            z.object({\n              bytesBase64Encoded: z.string().nullish(),\n              gcsUri: z.string().nullish(),\n            }),\n          )\n          .nullish(),\n      })\n      .passthrough(),\n  ),\n);\n"],"names":["generateId","lazySchema","zodSchema","z","lazySchema","zodSchema","z","responseHeaders","response","rawValue","lazySchema","zodSchema","z","combineHeaders","createJsonResponseHandler","lazySchema","parseProviderOptions","postJsonToApi","resolve","zodSchema","z","_a","_b","_c","lazySchema","zodSchema","z","UnsupportedFunctionalityError","googleTools","UnsupportedFunctionalityError","parseProviderOptions","googleTools","combineHeaders","resolve","postJsonToApi","createJsonResponseHandler","generateId","z","lazySchema","zodSchema","z","lazySchema","zodSchema","z","createProviderToolFactory","lazySchema","zodSchema","z","createProviderToolFactory","lazySchema","zodSchema","z","createProviderToolFactory","lazySchema","zodSchema","z","createProviderToolFactory","lazySchema","zodSchema","z","createProviderToolFactory","z","combineHeaders","convertToBase64","createJsonResponseHandler","lazySchema","parseProviderOptions","postJsonToApi","resolve","zodSchema","z","parseProviderOptions","postJsonToApi","combineHeaders","resolve","createJsonResponseHandler","convertToBase64","lazySchema","zodSchema","z","combineHeaders","createJsonResponseHandler","lazySchema","parseProviderOptions","postJsonToApi","resolve","zodSchema","z","parseProviderOptions","postJsonToApi","combineHeaders","resolve","createJsonResponseHandler","z","lazySchema","zodSchema","_a","generateId"],"mappings":"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"}}]
}